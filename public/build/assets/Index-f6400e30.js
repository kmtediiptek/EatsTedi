import{q as ee,a as e,F as R,j as r,W as te,r as c,b as re,y as v}from"./app-081f3543.js";import{A as T}from"./Actionbutton-d06f7bce.js";import{I as S}from"./InputLabel-3eeb76a6.js";import{E as h}from"./Error-7eaef181.js";import{S as ae}from"./Select-a65f8575.js";import{I as le}from"./InputFIle-a6753a49.js";import{T as _}from"./TextInput-b48b3dcc.js";import{S as z}from"./react-select.esm-dead390a.js";import{C as ie}from"./Container-9e3dc6e2.js";import{M as se}from"./Modal-2665796d.js";import{P as oe}from"./Pagination-c5fd78cd.js";import{P as F}from"./PrimaryButton-a074050f.js";import{S as A}from"./SecondaryButton-695f0f2c.js";import{T as l}from"./Table-ee63abb5.js";import{T as ne}from"./Toast-1b3d1cf2.js";import{A as ce}from"./App-4fd9dbe3.js";import{_ as w}from"./index-f1485e47.js";import{n as de}from"./Helper-c43eaa91.js";import{A as ue}from"./ActionLink-fdfbf142.js";import{T as j}from"./TabLink-66f329fc.js";import{I as pe}from"./IconPlus-425103cf.js";import{I as me}from"./IconEdit-e26e7685.js";import{I as he}from"./IconTrash-4d8bee97.js";import"./transition-cc3e1cad.js";import"./defineProperty-4870f27f.js";import"./typeof-7fd5df1e.js";import"./createReactComponent-10853b87.js";function ge({data:n,setData:d}){const{errors:s,categories:u,suppliers:g}=ee().props,N=a=>y=>{const p=y?y.value:null;d(a,p)},f=g.map(a=>({value:a.id,label:a.name})),o=f.find(a=>a.value===n.supplier_id.id);return e(R,{children:r("div",{children:[r("div",{className:"mb-6",children:[e(S,{htmlFor:"supplier",value:"Supplier"}),e(z,{id:"supplier-select",value:o,options:f,className:"w-full",onChange:N("supplier_id")}),s.supplier_id&&e(h,{value:s.supplier_id})]}),r("div",{className:"mb-6",children:[e(le,{picture:n.picture,name:"picture",id:"picture",className:"w-full",onChange:a=>d("picture",a.target.files[0])}),s.picture&&e(h,{value:s.picture})]}),r("div",{className:"mb-6",children:[e(S,{htmlFor:"category_id",value:"Category"}),e(ae,{value:n.category_id,data:u,className:"w-full",onChange:a=>d("category_id",a)}),s.category_id&&e(h,{value:s.category_id})]}),r("div",{className:"mb-6",children:[e(S,{htmlFor:"name",value:"Name"}),e(_,{name:"name",id:"name",className:"w-full",onChange:a=>d("name",a.target.value),value:n.name}),s.name&&e(h,{value:s.name})]}),r("div",{className:"mb-6",children:[e(S,{htmlFor:"price",value:"Price"}),e(_,{name:"price",id:"price",type:"number",className:"w-full",onChange:a=>d("price",a.target.value),value:n.price}),s.price&&e(h,{value:s.price})]})]})})}function fe({total_products:n,suppliers:d,...s}){const{data:u,meta:g,links:N}=s.products,{delete:f,data:o,setData:a}=te({name:"",supplier_id:"",category_id:"",slug:"",price:"",picture:""}),[y,p]=c.useState(!1),[E,b]=c.useState(!1),[L,O]=c.useState(""),[U,$]=c.useState(""),[x,B]=c.useState(""),[D,C]=c.useState(""),[P,Q]=c.useState(""),[I,q]=c.useState(null);function M(t,i){if(p(!0),O("Menu"),B(i),C(t),t){const m=u.find(Z=>Z.slug===t);a({name:m.name,slug:m.slug,supplier_id:m.supplier,category_id:m.category,price:m.price,picture:m.picture})}else a({name:"",supplier_id:"",category_id:"",slug:"",price:"",picture:""})}function W(){p(!1)}function Y(t,i){b(!0),$(i),C(t)}const G=t=>{t.preventDefault(),v.post("/admin/setting/product",{...o,supplier_id:o.supplier_id,category_id:o.category_id.id},{onSuccess:()=>{p(!1),a({name:"",slug:"",price:"",supplier_id:"",category_id:"",picture:""}),w.success("Menu has been created!")}})},H=t=>{t.preventDefault(),v.post(`/admin/setting/product/${o.slug}`,{_method:"put",...o,supplier_id:o.supplier_id,category_id:o.category_id.id},{onSuccess:()=>{p(!1),a({name:"",slug:"",price:"",picture:"",supplier_id:"",category_id:""}),w.success("Menu has been updated!")}})},J=t=>{f(route("admin.product.destroy",t),{onSuccess:()=>{w.success("Menu has been deleted!"),b(!1)}})},K=t=>{Q(t.target.value),v.get("/admin/setting/product",{search:t.target.value,supplier:I},{preserveState:!0})},V=t=>{const i=t?t.value:"";q(i||"all"),v.get("/admin/setting/product",{search:P,supplier:i},{preserveState:!0})},k=[{value:"all",label:"All Suppliers"},...d.slice().sort((t,i)=>t.name.localeCompare(i.name)).map(t=>({value:t.id,label:t.name}))],X=k.find(t=>t.value===I)||{value:"all",label:"All Suppliers"};return r(R,{children:[e(re,{title:"Setting"}),r(ie,{children:[e("h3",{className:"text-2xl mt-10 mb-4 font-semibold text-fourth",children:"Products"}),r("div",{className:"flex justify-between gap-2 w-full item-center my-2",children:[r("div",{className:"flex gap-2 w-min",children:[e(ue,{href:route("admin.dashboard")}),e(T,{onClick:()=>M("","create"),type:"button",children:e(pe,{size:18})})]}),r("div",{className:"flex w-3/4 md:w-1/2 gap-2",children:[e(z,{id:"supplier-select",value:X,options:k,className:"w-full md:w-1/2",onChange:V,styles:{control:(t,i)=>({...t,border:(i.isFocused,"2px solid #d4d4d8"),boxShadow:"none","&:hover":{border:"2px solid #d4d4d8"},height:"44px",borderRadius:"8px"}),option:(t,i)=>({...t,backgroundColor:i.isSelected||i.isFocused?"#d4d4d8":null,color:"black"}),menu:t=>({...t,borderRadius:"8px"}),menuList:t=>({...t,borderRadius:"8px"})},theme:t=>({...t,borderRadius:8,colors:{...t.colors,primary25:"#d4d4d8",primary:"black"}})}),e(_,{type:"search",className:"w-full md:w-1/2",placeholder:"Search menu..",value:P,onChange:K})]})]}),r("div",{className:"flex items-center gap-2 py-2",children:[e(j,{href:route("admin.product.index"),active:route().current("admin.product.index"),children:"All Menu"}),u.length>0?e(j,{href:route("admin.product.today.index"),active:route().current("admin.product.today.index"),children:"Daily Menu"}):null]}),r(l,{children:[e(l.Thead,{children:r("tr",{children:[e(l.Th,{children:"#"}),e(l.Th,{children:"Supplier"}),e(l.Th,{children:"Name"}),e(l.Th,{children:"Category"}),e(l.Th,{children:"Price"}),e(l.Th,{children:"Picture"}),e(l.Th,{children:"Action"})]})}),e(l.Tbody,{children:u.length>0?u.map((t,i)=>r("tr",{className:"bg-white border-b",children:[e(l.Td,{className:"w-5",children:g.from+i}),e(l.Td,{className:"font-bold",children:t.supplier.name.toUpperCase()}),e(l.Td,{children:t.name}),e(l.Td,{children:e("span",{className:`text-xs p-2 ${t.category.id===1?"bg-sky text-white rounded":t.category.id===2?"bg-emerald text-white rounded":"bg-violet text-white rounded"}`,children:t.category.name.toUpperCase()})}),r(l.Td,{children:[e("sup",{children:" Rp."})," ",de(t.price)]}),e(l.Td,{children:e("img",{src:t.picture?t.picture:"https://flowbite.com/docs/images/blog/image-1.jpg",className:"rounded w-12 h-12"})}),e(l.Td,{className:"w-10",children:r("div",{className:"flex flex-nowrap gap-2",children:[e(T,{className:"w-8 h-8 bg-yellow-400",type:"button",onClick:()=>M(t.slug,"edit"),children:e(me,{size:18})}),e(T,{className:"w-8 h-8 bg-red-500",type:"button",onClick:()=>Y(t.slug,t.name),children:e(he,{size:18})})]})})]},i)):e("tr",{className:"bg-white border-b text-secondary text-center",children:e(l.Td,{colSpan:"7",children:"No data"})})})]}),u.length>0&&r("div",{className:"flex w-full justify-between items-center",children:[e(oe,{meta:g,links:N}),r("p",{className:"text-sm text-third mt-10",children:["Total Products:"," ",e("span",{className:"font-bold",children:n})," "]})]}),e(se,{isOpen:y,onClose:()=>p(!1),size:"1/2",type:x,title:L,children:r("form",{onSubmit:x==="create"?G:H,className:"mt-6",children:[e(ge,{data:o,setData:a}),r("div",{className:"flex justify-end gap-2",children:[e(A,{onClick:()=>W(),children:"Cancel"}),e(F,{type:"submit",children:x==="create"?"Create":"Update"})]})]})}),e(ne,{isToast:E,onClose:()=>b(!1),title:`This action will start the Product deletion process. Do you want to delete the Product? ${U}? `,children:r("div",{className:"flex justify-end gap-2 justify-end",children:[e(A,{onClick:()=>b(!1),className:"w-32",children:"No"}),e(F,{onClick:()=>J(D),className:"w-32",children:"Yes"})]})})]})]})}fe.layout=n=>e(ce,{children:n});export{fe as default};
