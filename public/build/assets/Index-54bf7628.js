import{W as z,r as o,q as O,j as r,F as E,a as e,b as M,y as T}from"./app-081f3543.js";import{A as m}from"./Actionbutton-d06f7bce.js";import{C as Q}from"./Container-9e3dc6e2.js";import{P as $}from"./Pagination-c5fd78cd.js";import{T as t}from"./Table-ee63abb5.js";import{A as q}from"./App-4fd9dbe3.js";import{n}from"./Helper-c43eaa91.js";import{T as p}from"./TextInput-b48b3dcc.js";import{E as H}from"./jspdf.plugin.autotable-7ffd63b8.js";import{A as W}from"./ActionLink-fdfbf142.js";import{M as B}from"./Modal-2665796d.js";import{I as K,a as L}from"./IconPrinter-3099a3ce.js";import{I as g}from"./IconTrash-4d8bee97.js";import"./index-f1485e47.js";import"./transition-cc3e1cad.js";import"./typeof-7fd5df1e.js";import"./createReactComponent-10853b87.js";function U({total_invoices:h,...b}){const{data:i,meta:f,links:x}=b.invoices,{data:d,setData:N,delete:_}=z({start_date:"",end_date:""}),[v,I]=o.useState(""),[y,S]=o.useState(!1),[C,u]=o.useState(!1),[A,P]=o.useState({}),{errors:c}=O().props,w=a=>{N(a.target.name,a.target.value)},j=()=>{T.get("/admin/invoice",{start_date:d.start_date,end_date:d.end_date},{preserveState:!0}),S(!0)},k=a=>{if(y)try{const l=new H("landscape"),F=[["Order ID","Name","Charge","Change","Total Quantity","Total Price","Succeeded at"]],R=a.map(s=>[s.order_id,s.name,`Rp. ${n(s.money.charge)}`,`Rp. ${n(s.money.change)}`,s.total_quantity,`Rp. ${n(s.total_price)}`,s.succeeded_at]);l.autoTable({head:F,body:R,startY:20}),l.save("Report Order Eatstedi.pdf")}catch(l){console.error("Error generating PDF:",l)}else alert("Please apply the filter first.")},D=a=>{a.preventDefault(),I(a.target.value),T.get("/admin/invoice",{search:a.target.value},{preserveState:!0})};return r(E,{children:[e(M,{title:"History"}),r(Q,{children:[e("h3",{className:"text-2xl mt-10 mb-4 font-semibold text-fourth",children:"Invoices"}),e("div",{className:"flex  flex-wrap justify-between w-full item-center mt-2",children:e(W,{href:route("admin.dashboard")})}),r("div",{className:"flex  flex-wrap justify-between w-full item-center my-2",children:[r("div",{className:"flex items-center flex-wrap sm:flex-nowrap gap-2 w-full mb-2 md:mb-0 sm:w-full md:w-1/2",children:[r("div",{className:"w-full flex gap-2",children:[r("div",{className:"w-full",children:[e(p,{type:"date",name:"start_date",id:"start_date",className:"w-full",onChange:w,value:d.start_date}),c.start_date?e("span",{className:"text-red-500",children:c.start_date}):null]}),r("div",{className:"w-full",children:[e(p,{type:"date",name:"end_date",id:"end_date",className:"w-full",onChange:w,value:d.end_date}),c.end_date?e("span",{className:"text-red-500",children:c.end_date}):null]})]}),r("div",{className:"w-full sm:w-auto flex gap-2 justify-end sm:justify-start",children:[e(m,{className:"w-10 h-10 bg-violet",onClick:j,type:"button",disabled:!d.start_date||!d.end_date,children:e(K,{size:26})}),e(m,{className:"w-10 h-10",onClick:()=>k(i),type:"button",disabled:!y,children:e(L,{size:26})})]})]}),e(p,{type:"search",className:"w-full md:w-1/4 ",placeholder:"Search invoice..",defaultValue:v,onChange:D})]}),e("div",{className:"w-full"}),r(t,{children:[e(t.Thead,{children:r("tr",{children:[e(t.Th,{children:"#"}),e(t.Th,{children:"Order ID"}),e(t.Th,{children:"Nama Customer"}),e(t.Th,{children:"Uang Masuk"}),e(t.Th,{children:"Kembalian"}),e(t.Th,{children:"Total Quantity"}),e(t.Th,{children:"Total Harga"}),e(t.Th,{children:"Waktu Pembelian"}),e(t.Th,{children:"Status"}),e(t.Th,{children:"Action"})]})}),e(t.Tbody,{children:i.length>0?i.map((a,l)=>r("tr",{className:"bg-white border-b",children:[e(t.Td,{className:"w-5",children:f.from+l}),r(t.Td,{children:["#",a.order_id]}),e(t.Td,{children:a.name}),r(t.Td,{children:[e("sup",{children:" Rp."})," ",n(a.money.charge)]}),r(t.Td,{children:[e("sup",{children:" Rp."})," ",n(a.money.change)]}),e(t.Td,{children:a.total_quantity}),r(t.Td,{children:[e("sup",{children:" Rp."})," ",n(a.total_price)]}),e(t.Td,{children:a.succeeded_at}),e(t.Td,{children:e("span",{className:`text-xs p-2 ${a.status==1?"bg-green-500 text-white rounded":"bg-yellow-400 text-white rounded"}`,children:a.status==1?"Done":"In Progress"})}),e(t.Td,{children:e(m,{className:"w-10 h-10",type:"button",onClick:()=>{u(!0),P(a)},children:e(g,{size:26})})})]},l)):e("tr",{className:"bg-white border-b text-secondary text-center",children:e(t.Td,{colSpan:"10",children:"No data"})})})]}),i.length>0&&r("div",{className:"flex w-full justify-between items-center",children:[e($,{meta:f,links:x}),r("p",{className:"text-sm text-third mt-10",children:["Total Invoices:"," ",e("span",{className:"font-bold",children:h})," "]})]})]}),r(B,{isOpen:C,setIsOpen:u,size:"1/3",title:"Delete Confirmation",children:[e("div",{children:"Are you sure you want to delete this data?"}),e(m,{type:"button",className:"w-10 h-10 mt-5",onClick:()=>{_(route("admin.invoice.destroy",A.id),{preserveScroll:!0,onSuccess:()=>u(!1)})},children:e(g,{size:20})})]})]})}U.layout=h=>e(q,{children:h});export{U as default};
