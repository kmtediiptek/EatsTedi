import{j as t,F as f,a as e,y as v,r as c,q as X,W as H,b as K,d as Z}from"./app-519d4450.js";import{_ as $,n as A}from"./index-c4b4fe84.js";import{n as F}from"./Helper-c43eaa91.js";import{I as ee}from"./IconTrash-f288ecce.js";import{c as o}from"./createReactComponent-eeb61691.js";import{I as te}from"./IconPlus-ef78c30e.js";import{C as ae}from"./Container-2edc54d1.js";import{T as I}from"./TextInput-8e01371f.js";import{E as B}from"./Error-9510444b.js";import{P as _}from"./PrimaryButton-62f49806.js";import{M as V}from"./Modal-5ea36325.js";import{S as D}from"./SecondaryButton-3d48acf9.js";import{T as le}from"./Toast-c79fcdec.js";import{P as se}from"./Pagination-51d480c1.js";import{I as re}from"./IconBox-a040d4ce.js";import{A as ne}from"./App-a2ce6782.js";import"./transition-57a4f24b.js";var ce=o("arrows-maximize","IconArrowsMaximize",[["path",{d:"M16 4l4 0l0 4",key:"svg-0"}],["path",{d:"M14 10l6 -6",key:"svg-1"}],["path",{d:"M8 20l-4 0l0 -4",key:"svg-2"}],["path",{d:"M4 20l6 -6",key:"svg-3"}],["path",{d:"M16 20l4 0l0 -4",key:"svg-4"}],["path",{d:"M14 14l6 6",key:"svg-5"}],["path",{d:"M8 4l-4 0l0 4",key:"svg-6"}],["path",{d:"M4 4l6 6",key:"svg-7"}]]),de=o("arrows-minimize","IconArrowsMinimize",[["path",{d:"M5 9l4 0l0 -4",key:"svg-0"}],["path",{d:"M3 3l6 6",key:"svg-1"}],["path",{d:"M5 15l4 0l0 4",key:"svg-2"}],["path",{d:"M3 21l6 -6",key:"svg-3"}],["path",{d:"M19 9l-4 0l0 -4",key:"svg-4"}],["path",{d:"M15 9l6 -6",key:"svg-5"}],["path",{d:"M19 15l-4 0l0 4",key:"svg-6"}],["path",{d:"M15 15l6 6",key:"svg-7"}]]),ie=o("bell","IconBell",[["path",{d:"M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6",key:"svg-0"}],["path",{d:"M9 17v1a3 3 0 0 0 6 0v-1",key:"svg-1"}]]),Q=o("cash","IconCash",[["path",{d:"M7 9m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M14 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M17 9v-2a2 2 0 0 0 -2 -2h-10a2 2 0 0 0 -2 2v6a2 2 0 0 0 2 2h2",key:"svg-2"}]]),L=o("checks","IconChecks",[["path",{d:"M7 12l5 5l10 -10",key:"svg-0"}],["path",{d:"M2 12l5 5m5 -5l5 -5",key:"svg-1"}]]),oe=o("circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),he=o("circle","IconCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}]]),me=o("click","IconClick",[["path",{d:"M3 12l3 0",key:"svg-0"}],["path",{d:"M12 3l0 3",key:"svg-1"}],["path",{d:"M7.8 7.8l-2.2 -2.2",key:"svg-2"}],["path",{d:"M16.2 7.8l2.2 -2.2",key:"svg-3"}],["path",{d:"M7.8 16.2l-2.2 2.2",key:"svg-4"}],["path",{d:"M12 12l9 3l-4 2l-2 4l-3 -9",key:"svg-5"}]]),U=o("exchange","IconExchange",[["path",{d:"M5 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M19 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M19 8v5a5 5 0 0 1 -5 5h-3l3 -3m0 6l-3 -3",key:"svg-2"}],["path",{d:"M5 16v-5a5 5 0 0 1 5 -5h3l-3 -3m0 6l3 -3",key:"svg-3"}]]),pe=o("minus","IconMinus",[["path",{d:"M5 12l14 0",key:"svg-0"}]]),ue=o("mood-dollar","IconMoodDollar",[["path",{d:"M20.87 10.48a9 9 0 1 0 -7.876 10.465",key:"svg-0"}],["path",{d:"M9 10h.01",key:"svg-1"}],["path",{d:"M15 10h.01",key:"svg-2"}],["path",{d:"M9.5 15c.658 .64 1.56 1 2.5 1c.357 0 .709 -.052 1.043 -.151",key:"svg-3"}],["path",{d:"M21 15h-2.5a1.5 1.5 0 0 0 0 3h1a1.5 1.5 0 0 1 0 3h-2.5",key:"svg-4"}],["path",{d:"M19 21v1m0 -8v1",key:"svg-5"}]]),fe=o("progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]),q=o("trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]),Y=o("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function ge({cart:a}){const u=()=>{v.post(`/admin/cart/increment/${a.product_slug}`)},d=()=>{v.post(`/admin/cart/decrement/${a.product_slug}`)},n=()=>{v.delete(`/admin/cart/${a.product_slug}`,{onSuccess:()=>$.success("Deleted Item!")})};return`${a.product_picture}`,t(f,{children:[t("div",{className:"flex order py-4 flex-flex-column gap-4",children:[e("div",{className:"flex gap-2 w-1/2 sm:w-2/3 overflow-hidden",children:t("div",{className:"flex flex flex-col justify-between",children:[e("h6",{className:"text-base text-fourth",children:a.product_name}),t("h5",{className:"text-lg font-semibold text-fourth",children:["Rp. ",F(a.product_price)]})]})}),t("div",{className:"w-1/2 sm:w-1/3 text-end flex flex-col flex-1 justify-between",children:[e(ee,{size:20,color:"red",className:"ml-auto",onClick:n}),t("div",{className:"flex justify-between align-center mt-3 ",children:[e(pe,{size:32,className:a.quantity===0?"bg-gray-400 text-white border p-1 rounded":"text-red-500 border p-1 rounded cursor-pointer",onClick:a.quantity===0?null:d}),e("span",{className:"border-0 w-12 px-0 h-8 text-lg text-center mx-auto text-lg",children:a.quantity}),e(te,{size:32,className:"text-white bg-primary border p-1 rounded cursor-pointer",onClick:u})]})]})]}),e("hr",{})]})}function xe({data:a,setData:u,onSubmit:d,total_price:n}){let[k,i]=c.useState(!1);const[z,T]=c.useState(""),[g,x]=c.useState(""),[M,h]=c.useState(0);function y(r){i(!0),x("Invoice"),T(r)}function S(){i(!1)}const{errors:b}=X().props,m=r=>{u(r.target.name,r.target.value)},p=r=>{if(r.key==="Enter"&&M&&a.charge!==0)if(console.log(M,a.charge,k),k){if(console.log("a"),N<n)return;d(r),i(!1)}else y("create")};c.useEffect(()=>(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}),[M,k,a.payment_id,a.charge,n]),c.useEffect(()=>{u("charge",n)},[a.payment_id]);const[P,C]=c.useState(!1),w=r=>{const O=r.target.value===1;C(O)},N=parseFloat(a.charge)||0,j=N-n;return t(f,{children:[b.name?e(B,{className:"",value:b.name}):null,t("div",{className:"flex items-center gap-4",children:[t("div",{className:"w-1/2 flex items-center pl-4 border border-gray-300 rounded",children:[e(I,{id:"bordered-radio-1",type:"radio",checked:a.payment_id==1,onChange:r=>{m(r),w(r),h(1)},value:"1",name:"payment_id",className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 focus:ring-primary"}),e("label",{htmlFor:"bordered-radio-1",className:"w-full py-2 ml-2 font-medium text-third",children:"Pay Cash"})]}),t("div",{className:"w-1/2 flex items-center pl-4 border border-gray-300 rounded",children:[e(I,{id:"bordered-radio-2",type:"radio",checked:a.payment_id==2,onChange:r=>{m(r),w(r),h(2)},value:"2",name:"payment_id",className:" w-4 h-4 text-primary bg-gray-100 border-gray-300 focus:ring-primary"}),e("label",{htmlFor:"bordered-radio-2",className:"w-full py-2 ml-2 font-medium text-third",children:"Pay Qris"})]})]}),a.payment_id?t(f,{children:[e(I,{type:"number",min:a.is_paid===1?1:"",name:"charge",id:"charge",className:"w-full",defaultValue:n,onChange:m,placeholder:"Charge.."}),b.charge?e(B,{className:"",value:b.charge}):null]}):"",e("div",{className:"pb-4 flex items-end flex-1 justify-end",children:a.charge!==0||a.is_paid===1?e(f,{children:e(_,{type:"button",onClick:()=>y("create"),disabled:N<n||a.payment_id==="",className:"bg-violet-600 text-white px-3 py-4 w-full rounded",children:"Buy"})}):e(f,{children:e(_,{className:"bg-violet-600 text-white px-3 py-4 w-full rounded",disabled:a.is_paid==="",children:"Confirm"})})}),t(V,{isOpen:k,onClose:()=>i(!1),size:"1/3",type:z,title:g,children:[t("div",{className:"mb-6 relative",children:[t("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none",children:[e(Q,{color:"green"})," ",e("sup",{className:"ml-1",children:"Rp."})]}),e(I,{type:"number",name:"charge",id:"charge",className:"w-full pl-16",value:a.charge,onChange:m,placeholder:"Charge.."})]}),t("div",{className:"mb-6 relative",children:[t("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none",children:[e(U,{color:"orange"})," ",e("sup",{className:"ml-1",children:"Rp."})]}),e(I,{type:"number",readOnly:!0,disabled:!0,name:"change",id:"change",className:"w-full pl-16",value:j,placeholder:"Change.."})]}),t("div",{className:"flex gap-4",children:[e(D,{onClick:()=>S(),children:e(Y,{})}),e(_,{onClick:r=>{r.preventDefault(),d(r),i(!1)},className:"bg-violet-600 text-white px-3 py-4 w-full rounded",disabled:N<n,children:e(L,{})})]})]})]})}function ye({invoice:a,onClick:u}){let[d,n]=c.useState(!1);const[k,i]=c.useState(""),[z,T]=c.useState(""),g=s=>{const E=new SpeechSynthesisUtterance(`The order under the name ${s} has been completed`);window.speechSynthesis.speak(E)};function x(){n(!1)}const M=s=>{v.post(`/admin/invoice/${s}`,{_method:"put"},{onSuccess:()=>{n(!1),$.success("Invoice has been added!")}})},[h,y]=c.useState({charge:a.charge}),[S,b]=c.useState(a.total_price);let[m,p]=c.useState(!1);const[P,C]=c.useState(""),[w,N]=c.useState("");function j(s){p(!0),N("Invoice"),C(s)}function r(){p(!1)}const O=s=>{const{name:E,value:R}=s.target;if(y({...h,[E]:R}),E==="charge"){const J=parseFloat(R)||0,W=parseFloat(a.total_price),G=J-W;b(G)}},l=s=>{s.preventDefault(),v.put(`/admin/invoice/${a.id}/pay`,{...h,charge:h.charge},{onSuccess:()=>{y({id:"",charge:""}),$.success("Order has been paid!"),setIsOrderListOpen(!1)}})};return t("div",{className:"flex gap-x-2 p-2 w-1/5 border border-secondary rounded text-white",children:[t("div",{className:"flex w-full gap-x-1",children:[t("div",{className:"h-16 w-full text-fourth flex flex-col justify-between",children:[e("h5",{className:"w-full font-semibold text-base text-fourth",children:a.customer_name}),t("span",{className:"text-third text-sm text-left",children:[a.total_quantity," Item"]})]}),t("div",{className:"bg-white flex items-end flex-col flex-1 gap-y-2 h-full justify-between h-16 w-full text-fourth",children:[e("button",{className:"bg-emerald font-semibold text-sm flex items-center gap-x-2 h-full px-1 rounded text-white",type:"button",onClick:()=>j("create"),disabled:a.charge!=0,children:a.charge==0?e(ue,{size:26}):e(f,{children:a.status==1?e(L,{size:26}):e(fe,{size:26})})}),t("div",{className:"bg-sky font-semibold text-sm flex items-center gap-x-2 h-full px-1 rounded text-white",children:[" ",a.charge==0?e(he,{size:26}):e(oe,{size:26})]})]}),a.status==1?null:e(f,{children:t("div",{className:"flex flex-col justify-between item-center gap-y-2",children:[e("button",{type:"button",onClick:()=>g(a.customer_name),className:"flex justify-center items-center rounded bg-primary px-1 h-full",children:e(ie,{size:26,className:"p-0 m-0 font-bold"})}),t("button",{onClick:u,className:"flex justify-center items-center rounded bg-violet px-1 h-full",children:[e(me,{})," "]})]})})]}),e(le,{isToast:d,name:"Confirm",onClose:()=>n(!1),title:k,children:t("div",{className:"flex justify-end gap-2 justify-center",children:[e(D,{onClick:()=>x(),children:"No"}),e(_,{onClick:()=>M(z),children:"Yes"})]})}),t(V,{isOpen:m,onClose:()=>p(!1),size:"1/3",type:P,title:w,children:[t("div",{className:"mb-6 relative",children:[t("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none",children:[e(Q,{color:"green"})," ",e("sup",{className:"ml-1",children:"Rp."})]}),e(I,{type:"number",name:"charge",id:"charge",className:"w-full pl-16",value:h.charge||"",onChange:O,placeholder:"Charge.."})]}),t("div",{className:"mb-6 relative",children:[t("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none",children:[e(U,{color:"orange"})," ",e("sup",{className:"ml-1",children:"Rp."})]}),e(I,{type:"number",readOnly:!0,disabled:!0,name:"change",id:"change",className:"w-full pl-16",value:S,placeholder:"Change.."})]}),t("div",{className:"flex gap-4",children:[e(D,{onClick:()=>r(),children:e(Y,{})}),e(_,{onClick:s=>{s.preventDefault(),l(s),p(!1)},className:"bg-primary text-white px-3 py-4 w-full rounded",disabled:S<0||h.charge==="",children:e(L,{})})]})]})]})}function ve({product:a,setIsOrderListOpen:u}){return t("button",{onClick:()=>{v.post(`/admin/cart/${a.slug}`,{quantity:1},{onSuccess:n=>{console.log(n,"a"),u(!0),A.success("Add to Cart!")},onFinish:n=>{console.log(n)},onError:n=>{A.error(n[0])}})},className:"border border-secondary rounded-md h-[180px] mb-4 relative flex flex-1 justify-end flex-col bg-cover bg-center",style:{backgroundImage:`url(${a.picture?a.picture:"https://asset.kompas.com/crops/FDAcmidsNYJDL80i55bj7pbXqyk=/95x0:939x563/750x500/data/photo/2022/07/10/62ca309364500.jpeg"})`},children:[e("span",{className:"bg-white opacity-50 text-sm text-black absolute p-1 px-1.5 rounded opacity-[0.8] shadow right-4 top-4",children:a.category.name}),t("span",{className:"bg-white opacity-50 flex items-center gap-2 text-sm text-black absolute p-1 px-1.5 rounded opacity-[0.8] shadow left-4 top-4",children:[e(re,{})," ",a.daily_stock.quantity]}),t("div",{className:"p-2 text-left w-full bg-opacity-60 bg-white",children:[e("p",{className:"text-fourth rounded text-lg font-bold line-clamp-2",children:a.name}),t("h6",{className:"text-lg font-bold rounded",children:[e("sup",{className:"font-light",children:" Rp."})," ",F(a.price)]})]})]})}function be({categories:a,total_categories:u,carts:d,invoices:n,payments:k,filter_category:i,error:z,...T}){const[g,x]=c.useState(!0),[M,h]=c.useState(null),{data:y,meta:S,links:b}=T.products,m=d.reduce((l,s)=>l+s.price,0),p=d.reduce((l,s)=>l+s.quantity,0),{url:P}=X(),{data:C,setData:w}=H({id:"",name:"",payment_id:"",charge:"",total_price:"",paid:""}),N=()=>{x(!g)},j=l=>{l?(w({name:l.name,charge:l.charge,paid:l.paid,payment_id:l.payment_id.id,carts:d,total_price:m,quantity:p}),v.get("/admin/transaction",{},{preserveState:!0}),h(l),x(!0)):(x(!0),h(null))},r=(l=null)=>{l==null||l.preventDefault(),v.post("/admin/invoice",{...C,carts:d,total:m,is_paid:1,quantity:p,payment_id:C.payment_id},{onSuccess:()=>{w({id:"",name:"",carts:"",total:"",payment_id:"",charge:""}),$.success("Invoice has been added!"),x(!1)}})},O=l=>{v.get(P,{category:l},{})};return t(f,{children:[e(K,{title:"Menu"}),e(ae,{children:t("div",{className:"flex w-full",children:[e("button",{className:"block fixed z-[100] bg-white rounded right-4 top-18 mt-1  p-4 text-primary",onClick:N,children:g?e(de,{}):e(ce,{})}),t("div",{className:`bg-white ${g?"w-3/4":"w-full"}`,children:[e("div",{className:"flex w-full mt-6 scrolling-wrapper overflow-x-scroll overflow-y-hidden pb-1 flex-nowrap gap-x-4",children:n.length>0?e(f,{children:n.map((l,s)=>e(ye,{invoice:l,onClick:()=>j(l)},s))}):t("div",{className:"flex justify-start items-center flex-1",children:[t("h1",{className:"text-third mr-2",children:[e(q,{size:24})," "]}),e("p",{className:"text-third text-lg",children:"Empty Order List"})]})}),e("hr",{className:"my-4"}),t("div",{className:"flex w-full scrolling-wrapper overflow-x-scroll pb-1 flex-nowrap gap-x-4",children:[e(Z,{href:route("admin.transaction"),className:"flex text-white",children:t("div",{className:`w-32 h-18 ${i?"text-fourth":"bg-primary text-white"} rounded rounded border border-secondary p-2 shadow`,children:[e("p",{className:"block",children:"All Menu"}),t("h6",{className:"text-lg font-semibold",children:[u," items"]})]})}),a.map((l,s)=>e("button",{onClick:()=>O(l.slug),className:`flex rounded ${(i==null?void 0:i.toLowerCase())===l.name.toLowerCase()?"bg-primary text-white":"hover:bg-orange-300"} text-white `,children:t("div",{className:`w-32 h-18 text-left rounded border border-secondary text-fourth hover:text-white p-2 ${(i==null?void 0:i.toLowerCase())===l.name.toLowerCase()?"text-white":""}`,children:[e("p",{className:"",children:l.name}),t("h6",{className:"text-lg font-semibold",children:[l.products_count," items"]})]})},s))]}),t("div",{className:"w-full",children:[e("hr",{className:"my-4"}),y.length>0?e("div",{className:`grid grid-cols-1 sm:grid-cols-2 ${g?"md:grid-cols-6":"md:grid-cols-7"}  lg:grid-cols-lg-4 gap-4 gap-y-8 w-full flex-wrap`,children:y.map((l,s)=>e(ve,{product:l,setIsOrderListOpen:x},s))}):t("div",{className:"flex justify-center items-center flex-col flex-1 h-[280px]",children:[t("h1",{className:"text-third",children:[e(q,{size:64})," "]}),e("p",{className:"text-third mt-4 text-lg",children:"Empty Menu"})]}),y.length>0&&e(se,{meta:S,links:b})]})]}),t("div",{className:`w-3/4 sm:w-2/5 md:w-1/4 flex flex-col bg-white top-16 right-0 bottom-0 fixed max-h-screen border-l border-b rounded-bl border-gray-300 ml-2 ${g?"block":"hidden"}`,children:[t("div",{className:"fixed bg top-16 w-full flex flex-col justify-end",children:[e("h3",{className:"text-xl pl-4 bg-white font-semibold text-fourth py-5",children:"Order Details"}),e("hr",{})]}),e("div",{className:"px-4 h-3/6 flex flex-col h-full justify-start bg-white flex-1 pt-16 scrolling-wrapper overflow-y-scroll",children:e("div",{className:"flex flex-col flex-1",children:d.length>0?e(f,{children:d.map((l,s)=>e(ge,{cart:l,selectedOrder:M},s))}):t("div",{className:"flex justify-center items-center flex-col flex-1 h-[280px]",children:[t("h1",{className:"text-secondary",children:[e(q,{size:64,stroke:1})," "]}),e("p",{className:"text-third mt-4 text-lg",children:"Empty Order"})]})})}),e("div",{className:"h-max w-full px-4 pb-0 bg-white",children:t("div",{className:"space-y-3 flex flex-col justify-start mb-4",children:[e("hr",{}),t("div",{className:"flex justify-between",children:[e("p",{className:"text-lg text-third",children:"Quantity"}),e("p",{className:"text-lg font-bold text-slate-600",children:p})]}),t("div",{className:"flex justify-between",children:[e("p",{className:"text-lg font-semibold text-third",children:"Total"}),t("p",{className:"text-lg font-bold text-slate-600",children:["Rp. ",F(m)]})]}),t("form",{onSubmit:r,className:"w-full space-y-4",children:[e(xe,{onSubmit:r,total_price:m,carts:d,data:C,setData:w}),e("hr",{})]})]})})]})]})})]})}be.layout=a=>e(ne,{children:a});export{be as default};
