import{q as y,W as L,r as n,j as l,F as B,a as e,b as Y,y as T}from"./app-519d4450.js";import{A as c}from"./Actionbutton-c3908258.js";import{C as G}from"./Container-2edc54d1.js";import{P as K}from"./Pagination-51d480c1.js";import{T as a}from"./Table-4944571f.js";import{A as U}from"./App-a2ce6782.js";import{n as s}from"./Helper-c43eaa91.js";import{T as w}from"./TextInput-8e01371f.js";import{E as V}from"./jspdf.plugin.autotable-af6b04a7.js";import{A as X}from"./ActionLink-253cabfe.js";import{S as Z}from"./react-select.esm-48900eb8.js";import{M as k}from"./Modal-5ea36325.js";import{I as ee,a as te}from"./IconPrinter-0585c8e7.js";import{I as N}from"./IconTrash-f288ecce.js";import"./index-c4b4fe84.js";import"./transition-57a4f24b.js";import"./typeof-7fd5df1e.js";import"./createReactComponent-eeb61691.js";import"./defineProperty-4870f27f.js";function ae({total_qris:m,total_cash:g,banyak_transaksi:S,suppliers:_,rekap_transaksi:p,total_invoices:le,...I}){const{data:u,meta:f,links:C}=I.invoices,{url:P}=y(),{data:i,setData:R,delete:A}=L({start_date:"",end_date:""}),[F,re]=n.useState(""),[b,j]=n.useState(!1),[D,q]=n.useState("all"),[z,h]=n.useState(!1),[H,E]=n.useState({}),{errors:o}=y().props,x=t=>{R(t.target.name,t.target.value)},J=t=>{const r=t?t.value:"";q(r||"all"),T.get(P,{search:F,supplier:r},{preserveState:!0})},M=()=>{T.get("/admin/rekap",{start_date:i.start_date,end_date:i.end_date},{preserveState:!0}),j(!0)},O=t=>{if(b)try{const r=new V("landscape"),Q=[["Invoice ID","Nama Supplier","Nama Customer","Nama Produk","Jenis Pembayaran","Harga","Jumlah","Total Harga","Waktu Pembelian"]],W=p.map(d=>[d.invoice_id,d.supplier.name,d.invoice.customer_name,d.product.name,d.invoice.payment.name,`Rp. ${s(d.price)}`,d.quantity,`Rp. ${s(d.price*d.quantity)}`,d.purchased_at]);r.autoTable({head:Q,body:W,startY:20}),r.save("Report Order Eatstedi.pdf")}catch(r){console.error("Error generating PDF:",r)}else alert("Please apply the filter first.")},v=[{value:"all",label:"All Suppliers"},..._.map(t=>({value:t.id,label:t.name}))],$=v.find(t=>t.value===D)||{value:"all",label:"All Suppliers"};return l(B,{children:[e(Y,{title:"History"}),l(G,{children:[e("h3",{className:"text-2xl mt-10 mb-4 font-semibold text-fourth",children:"Rekap Transaksi"}),e("div",{className:"flex  flex-wrap justify-between w-full item-center mt-2",children:e(X,{href:route("admin.dashboard")})}),l("div",{className:"flex  flex-wrap justify-between w-full item-center my-2",children:[l("div",{className:"flex items-center flex-wrap sm:flex-nowrap gap-2 w-full mb-2 md:mb-0 sm:w-full md:w-1/2",children:[l("div",{className:"w-full flex gap-2",children:[l("div",{className:"w-full",children:[e(w,{type:"date",name:"start_date",id:"start_date",className:"w-full",onChange:x,value:i.start_date}),o.start_date?e("span",{className:"text-red-500",children:o.start_date}):null]}),l("div",{className:"w-full",children:[e(w,{type:"date",name:"end_date",id:"end_date",className:"w-full",onChange:x,value:i.end_date}),o.end_date?e("span",{className:"text-red-500",children:o.end_date}):null]})]}),l("div",{className:"w-full sm:w-auto flex gap-2 justify-end sm:justify-start",children:[e(c,{className:"w-10 h-10 bg-violet",onClick:M,type:"button",disabled:!i.start_date||!i.end_date,children:e(ee,{size:26})}),e(c,{className:"w-10 h-10",onClick:()=>O(),type:"button",disabled:!b,children:e(te,{size:26})})]})]}),e(Z,{id:"supplier-select",value:$,options:v,className:"w-full lg:w-1/4",onChange:J,styles:{control:(t,r)=>({...t,border:(r.isFocused,"2px solid #d4d4d8"),boxShadow:"none","&:hover":{border:"2px solid #d4d4d8"},height:"44px",borderRadius:"8px"}),option:(t,r)=>({...t,backgroundColor:r.isSelected||r.isFocused?"#d4d4d8":null,color:"black"}),menu:t=>({...t,borderRadius:"8px"}),menuList:t=>({...t,borderRadius:"8px"})},theme:t=>({...t,borderRadius:8,colors:{...t.colors,primary25:"#d4d4d8",primary:"black"}})})]}),e("div",{className:"w-full"}),l(a,{children:[e(a.Thead,{children:l("tr",{children:[e(a.Th,{children:"#"}),e(a.Th,{children:"Invoice ID"}),e(a.Th,{children:"Nama Supplier"}),e(a.Th,{children:"Nama Customer"}),e(a.Th,{children:"Nama Produk"}),e(a.Th,{children:"Jenis Pembayaran"}),e(a.Th,{children:"Harga"}),e(a.Th,{children:"Jumlah"}),e(a.Th,{children:"Total Harga"}),e(a.Th,{children:"Waktu Pembelian"}),e(a.Th,{children:"Status"}),e(a.Th,{children:"Action"})]})}),e(a.Tbody,{children:u.length>0?p.map((t,r)=>l("tr",{className:"bg-white border-b",children:[e(a.Td,{className:"w-5",children:f.from+r}),l(a.Td,{children:["#",t.invoice_id]}),e(a.Td,{children:t.supplier.name}),e(a.Td,{children:t.invoice.customer_name}),e(a.Td,{children:t.product.name}),e(a.Td,{children:t.payment_name}),l(a.Td,{children:[e("sup",{children:" Rp."})," ",s(t.price)]}),e(a.Td,{children:s(t.quantity)}),l(a.Td,{children:[e("sup",{children:" Rp."})," ",s(t.price*t.quantity)]}),e(a.Td,{children:t.purchased_at}),e(a.Td,{children:e("span",{className:`text-xs p-2 ${t.invoice.status==1?"bg-green-500 text-white rounded":"bg-yellow-400 text-white rounded"}`,children:t.invoice.status==1?"Done":"In Progress"})}),e(a.Td,{children:e(c,{type:"button",onClick:()=>{h(!0),E(t)},className:"w-10 h-10",children:e(N,{size:26})})})]},r)):e("tr",{className:"bg-white border-b text-secondary text-center",children:e(a.Td,{colSpan:"10",children:"No data"})})})]}),u.length>0&&l("div",{className:"flex w-full justify-between items-center",children:[e(K,{meta:f,links:C}),l("div",{className:"flex gap-3",children:[l("p",{className:"text-sm text-third mt-10",children:["Total Rekap:"," ",e("span",{className:"font-bold",children:s(S)})," "]}),l("p",{className:"text-sm text-third mt-10",children:["Total Qris:"," ",e("span",{className:"font-bold",children:s(m)})," "]}),l("p",{className:"text-sm text-third mt-10",children:["Total Cash:"," ",e("span",{className:"font-bold",children:s(g)})," "]})]})]})]}),l(k,{isOpen:z,setIsOpen:h,size:"1/3",title:"Delete Confirmation",children:[e("div",{children:"Are you sure you want to delete this data?"}),e(c,{type:"button",className:"w-10 h-10 mt-5",onClick:()=>A(route("admin.rekap.destroy",H.id),{preserveScroll:!0,onSuccess:()=>h(!1)}),children:e(N,{size:20})})]})]})}ae.layout=m=>e(U,{children:m});export{ae as default};
