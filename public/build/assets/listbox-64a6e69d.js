import{r as s,m as U}from"./app-50127253.js";import{s as re,c as w,o as f,S as J,D as C,y as F,u as E,p as H,g as Oe,e as j,R as Re,X as k,C as Se,d as K}from"./transition-42c9a528.js";import{h as ye,a as Le,T as Ie,c as $e,p as De,I as z,e as Te,o as h,r as Pe,b as we}from"./keyboard-038d4531.js";function ne(e,r){let[t,o]=s.useState(e),i=re(e);return w(()=>o(i.current),[i,o,...r]),t}function Z(e){var r;if(e.type)return e.type;let t=(r=e.as)!=null?r:"button";if(typeof t=="string"&&t.toLowerCase()==="button")return"button"}function Ee(e,r){let[t,o]=s.useState(()=>Z(e));return w(()=>{o(Z(e))},[e.type,e.as]),w(()=>{t||r.current&&r.current instanceof HTMLButtonElement&&!r.current.hasAttribute("type")&&o("button")},[t,r]),t}function Ce(e){throw new Error("Unexpected object: "+e)}var y=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(y||{});function Fe(e,r){let t=r.resolveItems();if(t.length<=0)return null;let o=r.resolveActiveIndex(),i=o??-1,a=(()=>{switch(e.focus){case 0:return t.findIndex(n=>!r.resolveDisabled(n));case 1:{let n=t.slice().reverse().findIndex((l,p,b)=>i!==-1&&b.length-p-1>=i?!1:!r.resolveDisabled(l));return n===-1?n:t.length-1-n}case 2:return t.findIndex((n,l)=>l<=i?!1:!r.resolveDisabled(n));case 3:{let n=t.slice().reverse().findIndex(l=>!r.resolveDisabled(l));return n===-1?n:t.length-1-n}case 4:return t.findIndex(n=>r.resolveId(n)===e.id);case 5:return null;default:Ce(e)}})();return a===-1?o:a}function oe(e={},r=null,t=[]){for(let[o,i]of Object.entries(e))ae(t,ie(r,o),i);return t}function ie(e,r){return e?e+"["+r+"]":r}function ae(e,r,t){if(Array.isArray(t))for(let[o,i]of t.entries())ae(e,ie(r,o.toString()),i);else t instanceof Date?e.push([r,t.toISOString()]):typeof t=="boolean"?e.push([r,t?"1":"0"]):typeof t=="string"?e.push([r,t]):typeof t=="number"?e.push([r,`${t}`]):t==null?e.push([r,""]):oe(t,r,e)}function ke(e,r,t){let[o,i]=s.useState(t),a=e!==void 0,n=s.useRef(a),l=s.useRef(!1),p=s.useRef(!1);return a&&!n.current&&!l.current?(l.current=!0,n.current=a,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!a&&n.current&&!p.current&&(p.current=!0,n.current=a,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[a?e:o,f(b=>(a||i(b),r==null?void 0:r(b)))]}function _(e){return[e.screenX,e.screenY]}function Ae(){let e=s.useRef([-1,-1]);return{wasMoved(r){let t=_(r);return e.current[0]===t[0]&&e.current[1]===t[1]?!1:(e.current=t,!0)},update(r){e.current=_(r)}}}let ee=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function te(e){var r,t;let o=(r=e.innerText)!=null?r:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return o;let a=!1;for(let l of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))l.remove(),a=!0;let n=a?(t=i.innerText)!=null?t:"":o;return ee.test(n)&&(n=n.replace(ee,"")),n}function Me(e){let r=e.getAttribute("aria-label");if(typeof r=="string")return r.trim();let t=e.getAttribute("aria-labelledby");if(t){let o=t.split(" ").map(i=>{let a=document.getElementById(i);if(a){let n=a.getAttribute("aria-label");return typeof n=="string"?n.trim():te(a).trim()}return null}).filter(Boolean);if(o.length>0)return o.join(", ")}return te(e).trim()}function Ne(e){let r=s.useRef(""),t=s.useRef("");return f(()=>{let o=e.current;if(!o)return"";let i=o.innerText;if(r.current===i)return t.current;let a=Me(o).trim().toLowerCase();return r.current=i,t.current=a,a})}var Be=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Be||{}),Qe=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Qe||{}),Ue=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ue||{}),He=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.RegisterLabel=7]="RegisterLabel",e))(He||{});function G(e,r=t=>t){let t=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,o=we(r(e.options.slice()),a=>a.dataRef.current.domRef.current),i=t?o.indexOf(t):null;return i===-1&&(i=null),{options:o,activeOptionIndex:i}}let je={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let r=e.activeOptionIndex,{isSelected:t}=e.dataRef.current,o=e.options.findIndex(i=>t(i.dataRef.current.value));return o!==-1&&(r=o),{...e,listboxState:0,activeOptionIndex:r}},2(e,r){var t;if(e.dataRef.current.disabled||e.listboxState===1)return e;let o=G(e),i=Fe(r,{resolveItems:()=>o.options,resolveActiveIndex:()=>o.activeOptionIndex,resolveId:a=>a.id,resolveDisabled:a=>a.dataRef.current.disabled});return{...e,...o,searchQuery:"",activeOptionIndex:i,activationTrigger:(t=r.trigger)!=null?t:1}},3:(e,r)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let t=e.searchQuery!==""?0:1,o=e.searchQuery+r.value.toLowerCase(),i=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+t).concat(e.options.slice(0,e.activeOptionIndex+t)):e.options).find(n=>{var l;return!n.dataRef.current.disabled&&((l=n.dataRef.current.textValue)==null?void 0:l.startsWith(o))}),a=i?e.options.indexOf(i):-1;return a===-1||a===e.activeOptionIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeOptionIndex:a,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,r)=>{let t={id:r.id,dataRef:r.dataRef},o=G(e,i=>[...i,t]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(r.dataRef.current.value)&&(o.activeOptionIndex=o.options.indexOf(t)),{...e,...o}},6:(e,r)=>{let t=G(e,o=>{let i=o.findIndex(a=>a.id===r.id);return i!==-1&&o.splice(i,1),o});return{...e,...t,activationTrigger:1}},7:(e,r)=>({...e,labelId:r.id})},W=s.createContext(null);W.displayName="ListboxActionsContext";function A(e){let r=s.useContext(W);if(r===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,A),t}return r}let X=s.createContext(null);X.displayName="ListboxDataContext";function M(e){let r=s.useContext(X);if(r===null){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,M),t}return r}function ze(e,r){return E(r.type,je,e,r)}let Ve=s.Fragment;function qe(e,r){let{value:t,defaultValue:o,form:i,name:a,onChange:n,by:l=(c,d)=>c===d,disabled:p=!1,horizontal:b=!1,multiple:m=!1,...I}=e;const T=b?"horizontal":"vertical";let $=F(r),[O=m?[]:void 0,L]=ke(t,n,o),[g,u]=s.useReducer(ze,{dataRef:s.createRef(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),v=s.useRef({static:!1,hold:!1}),P=s.useRef(null),N=s.useRef(null),V=s.useRef(null),R=f(typeof l=="string"?(c,d)=>{let S=l;return(c==null?void 0:c[S])===(d==null?void 0:d[S])}:l),D=s.useCallback(c=>E(x.mode,{1:()=>O.some(d=>R(d,c)),0:()=>R(O,c)}),[O]),x=s.useMemo(()=>({...g,value:O,disabled:p,mode:m?1:0,orientation:T,compare:R,isSelected:D,optionsPropsRef:v,labelRef:P,buttonRef:N,optionsRef:V}),[O,p,m,g]);w(()=>{g.dataRef.current=x},[x]),ye([x.buttonRef,x.optionsRef],(c,d)=>{var S;u({type:1}),Le(d,Ie.Loose)||(c.preventDefault(),(S=x.buttonRef.current)==null||S.focus())},x.listboxState===0);let le=s.useMemo(()=>({open:x.listboxState===0,disabled:p,value:O}),[x,p,O]),ue=f(c=>{let d=x.options.find(S=>S.id===c);d&&q(d.dataRef.current.value)}),se=f(()=>{if(x.activeOptionIndex!==null){let{dataRef:c,id:d}=x.options[x.activeOptionIndex];q(c.current.value),u({type:2,focus:y.Specific,id:d})}}),ce=f(()=>u({type:0})),de=f(()=>u({type:1})),pe=f((c,d,S)=>c===y.Specific?u({type:2,focus:y.Specific,id:d,trigger:S}):u({type:2,focus:c,trigger:S})),fe=f((c,d)=>(u({type:5,id:c,dataRef:d}),()=>u({type:6,id:c}))),be=f(c=>(u({type:7,id:c}),()=>u({type:7,id:null}))),q=f(c=>E(x.mode,{0(){return L==null?void 0:L(c)},1(){let d=x.value.slice(),S=d.findIndex(Q=>R(Q,c));return S===-1?d.push(c):d.splice(S,1),L==null?void 0:L(d)}})),ve=f(c=>u({type:3,value:c})),xe=f(()=>u({type:4})),ge=s.useMemo(()=>({onChange:q,registerOption:fe,registerLabel:be,goToOption:pe,closeListbox:de,openListbox:ce,selectActiveOption:se,selectOption:ue,search:ve,clearSearch:xe}),[]),he={ref:$},B=s.useRef(null),me=H();return s.useEffect(()=>{B.current&&o!==void 0&&me.addEventListener(B.current,"reset",()=>{L==null||L(o)})},[B,L]),U.createElement(W.Provider,{value:ge},U.createElement(X.Provider,{value:x},U.createElement(Oe,{value:E(x.listboxState,{0:j.Open,1:j.Closed})},a!=null&&O!=null&&oe({[a]:O}).map(([c,d],S)=>U.createElement($e,{features:De.Hidden,ref:S===0?Q=>{var Y;B.current=(Y=Q==null?void 0:Q.closest("form"))!=null?Y:null}:void 0,...Re({key:c,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:i,name:c,value:d})})),k({ourProps:he,theirProps:I,slot:le,defaultTag:Ve,name:"Listbox"}))))}let Ge="button";function Ke(e,r){var t;let o=z(),{id:i=`headlessui-listbox-button-${o}`,...a}=e,n=M("Listbox.Button"),l=A("Listbox.Button"),p=F(n.buttonRef,r),b=H(),m=f(g=>{switch(g.key){case h.Space:case h.Enter:case h.ArrowDown:g.preventDefault(),l.openListbox(),b.nextFrame(()=>{n.value||l.goToOption(y.First)});break;case h.ArrowUp:g.preventDefault(),l.openListbox(),b.nextFrame(()=>{n.value||l.goToOption(y.Last)});break}}),I=f(g=>{switch(g.key){case h.Space:g.preventDefault();break}}),T=f(g=>{if(Pe(g.currentTarget))return g.preventDefault();n.listboxState===0?(l.closeListbox(),b.nextFrame(()=>{var u;return(u=n.buttonRef.current)==null?void 0:u.focus({preventScroll:!0})})):(g.preventDefault(),l.openListbox())}),$=ne(()=>{if(n.labelId)return[n.labelId,i].join(" ")},[n.labelId,i]),O=s.useMemo(()=>({open:n.listboxState===0,disabled:n.disabled,value:n.value}),[n]),L={ref:p,id:i,type:Ee(e,n.buttonRef),"aria-haspopup":"listbox","aria-controls":(t=n.optionsRef.current)==null?void 0:t.id,"aria-expanded":n.listboxState===0,"aria-labelledby":$,disabled:n.disabled,onKeyDown:m,onKeyUp:I,onClick:T};return k({ourProps:L,theirProps:a,slot:O,defaultTag:Ge,name:"Listbox.Button"})}let We="label";function Xe(e,r){let t=z(),{id:o=`headlessui-listbox-label-${t}`,...i}=e,a=M("Listbox.Label"),n=A("Listbox.Label"),l=F(a.labelRef,r);w(()=>n.registerLabel(o),[o]);let p=f(()=>{var m;return(m=a.buttonRef.current)==null?void 0:m.focus({preventScroll:!0})}),b=s.useMemo(()=>({open:a.listboxState===0,disabled:a.disabled}),[a]);return k({ourProps:{ref:l,id:o,onClick:p},theirProps:i,slot:b,defaultTag:We,name:"Listbox.Label"})}let Ye="ul",Je=J.RenderStrategy|J.Static;function Ze(e,r){var t;let o=z(),{id:i=`headlessui-listbox-options-${o}`,...a}=e,n=M("Listbox.Options"),l=A("Listbox.Options"),p=F(n.optionsRef,r),b=H(),m=H(),I=Se(),T=(()=>I!==null?(I&j.Open)===j.Open:n.listboxState===0)();s.useEffect(()=>{var u;let v=n.optionsRef.current;v&&n.listboxState===0&&v!==((u=Te(v))==null?void 0:u.activeElement)&&v.focus({preventScroll:!0})},[n.listboxState,n.optionsRef]);let $=f(u=>{switch(m.dispose(),u.key){case h.Space:if(n.searchQuery!=="")return u.preventDefault(),u.stopPropagation(),l.search(u.key);case h.Enter:if(u.preventDefault(),u.stopPropagation(),n.activeOptionIndex!==null){let{dataRef:v}=n.options[n.activeOptionIndex];l.onChange(v.current.value)}n.mode===0&&(l.closeListbox(),K().nextFrame(()=>{var v;return(v=n.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})}));break;case E(n.orientation,{vertical:h.ArrowDown,horizontal:h.ArrowRight}):return u.preventDefault(),u.stopPropagation(),l.goToOption(y.Next);case E(n.orientation,{vertical:h.ArrowUp,horizontal:h.ArrowLeft}):return u.preventDefault(),u.stopPropagation(),l.goToOption(y.Previous);case h.Home:case h.PageUp:return u.preventDefault(),u.stopPropagation(),l.goToOption(y.First);case h.End:case h.PageDown:return u.preventDefault(),u.stopPropagation(),l.goToOption(y.Last);case h.Escape:return u.preventDefault(),u.stopPropagation(),l.closeListbox(),b.nextFrame(()=>{var v;return(v=n.buttonRef.current)==null?void 0:v.focus({preventScroll:!0})});case h.Tab:u.preventDefault(),u.stopPropagation();break;default:u.key.length===1&&(l.search(u.key),m.setTimeout(()=>l.clearSearch(),350));break}}),O=ne(()=>{var u,v,P;return(P=(u=n.labelRef.current)==null?void 0:u.id)!=null?P:(v=n.buttonRef.current)==null?void 0:v.id},[n.labelRef.current,n.buttonRef.current]),L=s.useMemo(()=>({open:n.listboxState===0}),[n]),g={"aria-activedescendant":n.activeOptionIndex===null||(t=n.options[n.activeOptionIndex])==null?void 0:t.id,"aria-multiselectable":n.mode===1?!0:void 0,"aria-labelledby":O,"aria-orientation":n.orientation,id:i,onKeyDown:$,role:"listbox",tabIndex:0,ref:p};return k({ourProps:g,theirProps:a,slot:L,defaultTag:Ye,features:Je,visible:T,name:"Listbox.Options"})}let _e="li";function et(e,r){let t=z(),{id:o=`headlessui-listbox-option-${t}`,disabled:i=!1,value:a,...n}=e,l=M("Listbox.Option"),p=A("Listbox.Option"),b=l.activeOptionIndex!==null?l.options[l.activeOptionIndex].id===o:!1,m=l.isSelected(a),I=s.useRef(null),T=Ne(I),$=re({disabled:i,value:a,domRef:I,get textValue(){return T()}}),O=F(r,I);w(()=>{if(l.listboxState!==0||!b||l.activationTrigger===0)return;let R=K();return R.requestAnimationFrame(()=>{var D,x;(x=(D=I.current)==null?void 0:D.scrollIntoView)==null||x.call(D,{block:"nearest"})}),R.dispose},[I,b,l.listboxState,l.activationTrigger,l.activeOptionIndex]),w(()=>p.registerOption(o,$),[$,o]);let L=f(R=>{if(i)return R.preventDefault();p.onChange(a),l.mode===0&&(p.closeListbox(),K().nextFrame(()=>{var D;return(D=l.buttonRef.current)==null?void 0:D.focus({preventScroll:!0})}))}),g=f(()=>{if(i)return p.goToOption(y.Nothing);p.goToOption(y.Specific,o)}),u=Ae(),v=f(R=>u.update(R)),P=f(R=>{u.wasMoved(R)&&(i||b||p.goToOption(y.Specific,o,0))}),N=f(R=>{u.wasMoved(R)&&(i||b&&p.goToOption(y.Nothing))}),V=s.useMemo(()=>({active:b,selected:m,disabled:i}),[b,m,i]);return k({ourProps:{id:o,ref:O,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":m,disabled:void 0,onClick:L,onFocus:g,onPointerEnter:v,onMouseEnter:v,onPointerMove:P,onMouseMove:P,onPointerLeave:N,onMouseLeave:N},theirProps:n,slot:V,defaultTag:_e,name:"Listbox.Option"})}let tt=C(qe),rt=C(Ke),nt=C(Xe),ot=C(Ze),it=C(et),st=Object.assign(tt,{Button:rt,Label:nt,Options:ot,Option:it});export{st as N};
