import{q as Y,j as a,F as C,a as e,r as n,W as G,b as H,y as T}from"./app-50127253.js";import{A as v}from"./Actionbutton-61e1fa01.js";import{I as x}from"./InputLabel-cc2f457d.js";import{E as b,I as J,a as K,M as X}from"./Toast-5e3f78b2.js";import{I as Z,S as ee}from"./Select-4bbdf47a.js";import{T as S}from"./TextInput-01542f12.js";import{C as te}from"./Container-58708669.js";import{M as ae}from"./Modal-ca85eed3.js";import{P as re}from"./Pagination-a95b02de.js";import{P as M}from"./PrimaryButton-56a0c82f.js";import{S as I}from"./SecondaryButton-bc962aa5.js";import{T as r}from"./Table-e4273544.js";import{A as se}from"./App-f48d50a9.js";import{_ as w}from"./index-f4d5d2b2.js";import{n as le}from"./Helper-f0b8910d.js";import{A as ce}from"./ActionLink-e34be557.js";import{I as ne}from"./IconEdit-fda570f0.js";import"./createReactComponent-f77338bd.js";import"./transition-42c9a528.js";import"./listbox-64a6e69d.js";import"./keyboard-038d4531.js";function ie({data:l,setData:d}){const{errors:s,categories:h}=Y().props,g=c=>{d(c.target.name,c.target.value)};return a(C,{children:[a("div",{className:"mb-6",children:[e(Z,{picture:l.picture,name:"picture",id:"picture",className:"w-full",onChange:c=>d("picture",c.target.files[0])}),s.picture?e(b,{className:"",value:s.picture}):null]}),a("div",{className:"mb-6",children:[e(x,{htmlFor:"category_id",value:"Category"}),e(ee,{value:l.category_id,data:h,className:"w-full",onChange:c=>d("category_id",c)}),s.category_id?e(b,{className:"",value:s.category_id}):null]}),a("div",{className:"mb-6",children:[e(x,{htmlFor:"name",value:"Name"}),e(S,{name:"name",id:"name",className:"w-full",onChange:g,value:l.name}),s.name?e(b,{className:"",value:s.name}):null]}),a("div",{className:"mb-6",children:[e(x,{htmlFor:"price",value:"Price"}),e(S,{name:"price",id:"price",className:"w-full",onChange:g,value:l.price}),s.price?e(b,{className:"",value:s.price}):null]})]})}function oe({total_products:l,...d}){const{data:s,meta:h,links:g}=d.products,[c,P]=n.useState(),{delete:j,data:i,setData:m}=G({name:"",category_id:"",slug:"",price:"",picture:""});let[k,u]=n.useState(!1),[F,f]=n.useState(!1);const[A,z]=n.useState(""),[E,B]=n.useState(""),[N,D]=n.useState(""),[U,y]=n.useState("");function _(t,o){if(u(!0),z("Menu"),D(o),y(t),t){const p=s.find(W=>W.slug===t);y(t),m({name:p.name,slug:p.slug,category_id:p.category,price:p.price,picture:p.picture})}else y(""),m({name:"",category_id:"",slug:"",price:"",picture:""})}function $(t,o){f(!0),B(o),y(t)}function L(){u(!1)}function O(){f(!1)}const Q=t=>{t.preventDefault(),T.post("/admin/setting/product",{...i,category_id:i.category_id.id},{onSuccess:()=>{u(!1),m({name:"",slug:"",price:"",category_id:"",picture:""}),w.success("Menu has been created!")}})},q=t=>{t.preventDefault(),T.post(`/admin/setting/product/${i.slug}`,{_method:"put",...i,category_id:i.category_id.id},{onSuccess:()=>{u(!1),m({name:"",slug:"",price:"",picture:"",category_id:""}),w.success("Menu has been updated!")}})},R=t=>{j(route("admin.product.destroy",t),{onSuccess:()=>{w.success("Menu has been deleted!"),f(!1)}})},V=t=>{t.preventDefault(),P(t.target.value),T.get("/admin/setting/product",{search:t.target.value},{preserveState:!0})};return a(C,{children:[e(H,{title:"Setting"}),a(te,{children:[e("h3",{className:"text-2xl mt-10 mb-4 font-semibold text-slate-700",children:"Menus"}),a("div",{className:"flex justify-between gap-2 w-full item-center my-2",children:[a("div",{className:"flex gap-2",children:[e(ce,{href:route("admin.dashboard")}),e(v,{onClick:()=>_("","create"),type:"button",children:e(J,{size:18})})]}),e(S,{type:"search",className:"w-3/4 md:w-1/4",placeholder:"Search menu..",defaultValue:c,onChange:V})]}),e("div",{className:"w-full"}),a(r,{children:[e(r.Thead,{children:a("tr",{children:[e(r.Th,{children:"#"}),e(r.Th,{children:"Name"}),e(r.Th,{children:"Category"}),e(r.Th,{children:"Price"}),e(r.Th,{children:"Picture"}),e(r.Th,{children:"Action"})]})}),e(r.Tbody,{children:s.length>0?e(C,{children:s.map((t,o)=>a("tr",{className:"bg-white border-b text-gray-500",children:[e(r.Td,{className:"w-5",children:h.from+o}),e(r.Td,{children:t.name}),e(r.Td,{children:e("span",{className:`text-xs p-2 ${t.category.id==1?"bg-sky-500 text-white rounded":t.category.id==2?"bg-emerald-400 text-white rounded":"bg-purple-500 text-white rounded"}`,children:t.category.name.toUpperCase()})}),a(r.Td,{children:[e("sup",{children:" Rp."})," ",le(t.price)]}),e(r.Td,{children:e("img",{src:t.picture?t.picture:"https://flowbite.com/docs/images/blog/image-1.jpg",className:"rounded w-12 h-12"})}),e(r.Td,{className:"w-10",children:a("div",{className:"flex flex-nowrap gap-2",children:[e(v,{className:"w-8 h-8 bg-yellow-400",type:"button",onClick:()=>_(t.slug,"edit"),children:e(ne,{size:18})}),e(v,{className:"w-8 h-8 bg-red-500",type:"button",onClick:()=>$(t.slug,t.name),children:e(K,{size:18})})]})})]},o))}):e("tr",{className:"bg-white border-b text-gray-500 text-center",children:e(r.Td,{colSpan:"6",children:"No data"})})})]}),s.length>0&&a("div",{className:"flex w-full justify-between items-center",children:[e(re,{meta:h,links:g}),a("p",{className:"text-sm text-slate-500 mt-10",children:["Total Menus: ",e("span",{className:"font-bold",children:l})," "]})]}),e(ae,{isOpen:k,onClose:()=>u(!1),size:"1/3",type:N,title:A,children:a("form",{onSubmit:N=="create"?Q:q,className:"mt-6",children:[e(ie,{data:i,setData:m}),a("div",{className:"flex justify-end gap-2",children:[e(I,{onClick:()=>L(),children:"Cancel"}),e(M,{type:"submit",children:N=="create"?"Create":"Update"})]})]})}),e(X,{isToast:F,onClose:()=>f(!1),title:E,children:a("div",{className:"flex justify-end gap-2 justify-center",children:[e(I,{onClick:()=>O(),children:"No"}),e(M,{onClick:()=>R(U),children:"Yes"})]})})]})]})}oe.layout=l=>e(se,{children:l});export{oe as default};
