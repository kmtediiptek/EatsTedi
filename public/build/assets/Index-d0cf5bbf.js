import{W as F,r as f,q as R,j as r,F as j,a as e,b as k,y as g}from"./app-e84518f4.js";import{A as y}from"./Actionbutton-8748f7cb.js";import{C as D}from"./Container-fe046a49.js";import{P as z}from"./Pagination-efa05824.js";import{T as t}from"./Table-20844995.js";import{A as M}from"./App-67f4dd75.js";import{n}from"./Helper-f0b8910d.js";import{T as h}from"./TextInput-aba27e7c.js";import{E as Q}from"./jspdf.plugin.autotable-907c8f86.js";import{A as $}from"./ActionLink-177353c1.js";import{c as w}from"./createReactComponent-6fd5fae7.js";import"./index-c091b8ca.js";import"./transition-d5ee3e1f.js";import"./typeof-7fd5df1e.js";var q=w("filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]),E=w("printer","IconPrinter",[["path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2",key:"svg-0"}],["path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4",key:"svg-1"}],["path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z",key:"svg-2"}]]);function O({total_invoices:o,...T}){const{data:c,meta:m,links:b}=T.invoices,{data:s,setData:v}=F({start_date:"",end_date:""}),[x,N]=f.useState(""),[p,_]=f.useState(!1),{errors:i}=R().props,u=a=>{v(a.target.name,a.target.value)},I=()=>{g.get("/admin/invoice",{start_date:s.start_date,end_date:s.end_date},{preserveState:!0}),_(!0)},C=a=>{if(p)try{const l=new Q("landscape"),A=[["Order ID","Name","Charge","Change","Total Quantity","Total Price","Succeeded at"]],P=a.map(d=>[d.order_id,d.name,`Rp. ${n(d.money.charge)}`,`Rp. ${n(d.money.change)}`,d.total_quantity,`Rp. ${n(d.total_price)}`,d.succeeded_at]);l.autoTable({head:A,body:P,startY:20}),l.save("Report Order RANDA.pdf")}catch(l){console.error("Error generating PDF:",l)}else alert("Please apply the filter first.")},S=a=>{a.preventDefault(),N(a.target.value),g.get("/admin/invoice",{search:a.target.value},{preserveState:!0})};return r(j,{children:[e(k,{title:"History"}),r(D,{children:[e("h3",{className:"text-2xl mt-10 mb-4 font-semibold text-fourth",children:"Invoices"}),e("div",{className:"flex  flex-wrap justify-between w-full item-center mt-2",children:e($,{href:route("admin.dashboard")})}),r("div",{className:"flex  flex-wrap justify-between w-full item-center my-2",children:[r("div",{className:"flex items-center flex-wrap sm:flex-nowrap gap-2 w-full mb-2 md:mb-0 sm:w-full md:w-1/2",children:[r("div",{className:"w-full flex gap-2",children:[r("div",{className:"w-full",children:[e(h,{type:"date",name:"start_date",id:"start_date",className:"w-full",onChange:u,value:s.start_date}),i.start_date?e("span",{className:"text-red-500",children:i.start_date}):null]}),r("div",{className:"w-full",children:[e(h,{type:"date",name:"end_date",id:"end_date",className:"w-full",onChange:u,value:s.end_date}),i.end_date?e("span",{className:"text-red-500",children:i.end_date}):null]})]}),r("div",{className:"w-full sm:w-auto flex gap-2 justify-end sm:justify-start",children:[e(y,{className:"w-10 h-10 bg-violet",onClick:I,type:"button",disabled:!s.start_date||!s.end_date,children:e(q,{size:26})}),e(y,{className:"w-10 h-10",onClick:()=>C(c),type:"button",disabled:!p,children:e(E,{size:26})})]})]}),e(h,{type:"search",className:"w-full md:w-1/4 ",placeholder:"Search invoice..",defaultValue:x,onChange:S})]}),e("div",{className:"w-full"}),r(t,{children:[e(t.Thead,{children:r("tr",{children:[e(t.Th,{children:"#"}),e(t.Th,{children:"Order ID"}),e(t.Th,{children:"Name"}),e(t.Th,{children:"Charge"}),e(t.Th,{children:"Change"}),e(t.Th,{children:"Total Quantity"}),e(t.Th,{children:"Total Price"}),e(t.Th,{children:"Succeeded at"}),e(t.Th,{children:"Status"})]})}),e(t.Tbody,{children:c.length>0?c.map((a,l)=>r("tr",{className:"bg-white border-b",children:[e(t.Td,{className:"w-5",children:m.from+l}),r(t.Td,{children:["#",a.order_id]}),e(t.Td,{children:a.name}),r(t.Td,{children:[e("sup",{children:" Rp."})," ",n(a.money.charge)]}),r(t.Td,{children:[e("sup",{children:" Rp."})," ",n(a.money.change)]}),e(t.Td,{children:a.total_quantity}),r(t.Td,{children:[e("sup",{children:" Rp."})," ",n(a.total_price)]}),e(t.Td,{children:a.succeeded_at}),e(t.Td,{children:e("span",{className:`text-xs p-2 ${a.status==1?"bg-emerald-500 text-white rounded":"bg-yellow-400 text-white rounded"}`,children:a.status==1?"Done":"In Progress"})})]},l)):e("tr",{className:"bg-white border-b text-secondary text-center",children:e(t.Td,{colSpan:"10",children:"No data"})})})]}),c.length>0&&r("div",{className:"flex w-full justify-between items-center",children:[e(z,{meta:m,links:b}),r("p",{className:"text-sm text-third mt-10",children:["Total Invoices:"," ",e("span",{className:"font-bold",children:o})," "]})]})]})]})}O.layout=o=>e(M,{children:o});export{O as default};
