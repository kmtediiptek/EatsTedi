import{j as t,F as f,a as e,y as v,r as i,q as V,W as J,b as K,d as Z}from"./app-081f3543.js";import{_ as E,n as A}from"./index-f1485e47.js";import{n as R}from"./Helper-c43eaa91.js";import{I as ee}from"./IconTrash-4d8bee97.js";import{c as d}from"./createReactComponent-10853b87.js";import{I as te}from"./IconPlus-425103cf.js";import{C as ae}from"./Container-9e3dc6e2.js";import{T as I}from"./TextInput-b48b3dcc.js";import{E as B}from"./Error-7eaef181.js";import{P as z}from"./PrimaryButton-a074050f.js";import{M as X}from"./Modal-2665796d.js";import{S as D}from"./SecondaryButton-695f0f2c.js";import{T as le}from"./Toast-1b3d1cf2.js";import{P as se}from"./Pagination-c5fd78cd.js";import{I as ne}from"./IconBox-f9ffdf9b.js";import{A as re}from"./App-4fd9dbe3.js";import"./transition-cc3e1cad.js";var ie=d("arrows-maximize","IconArrowsMaximize",[["path",{d:"M16 4l4 0l0 4",key:"svg-0"}],["path",{d:"M14 10l6 -6",key:"svg-1"}],["path",{d:"M8 20l-4 0l0 -4",key:"svg-2"}],["path",{d:"M4 20l6 -6",key:"svg-3"}],["path",{d:"M16 20l4 0l0 -4",key:"svg-4"}],["path",{d:"M14 14l6 6",key:"svg-5"}],["path",{d:"M8 4l-4 0l0 4",key:"svg-6"}],["path",{d:"M4 4l6 6",key:"svg-7"}]]),ce=d("arrows-minimize","IconArrowsMinimize",[["path",{d:"M5 9l4 0l0 -4",key:"svg-0"}],["path",{d:"M3 3l6 6",key:"svg-1"}],["path",{d:"M5 15l4 0l0 4",key:"svg-2"}],["path",{d:"M3 21l6 -6",key:"svg-3"}],["path",{d:"M19 9l-4 0l0 -4",key:"svg-4"}],["path",{d:"M15 9l6 -6",key:"svg-5"}],["path",{d:"M19 15l-4 0l0 4",key:"svg-6"}],["path",{d:"M15 15l6 6",key:"svg-7"}]]),oe=d("bell","IconBell",[["path",{d:"M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6",key:"svg-0"}],["path",{d:"M9 17v1a3 3 0 0 0 6 0v-1",key:"svg-1"}]]),Q=d("cash","IconCash",[["path",{d:"M7 9m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M14 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M17 9v-2a2 2 0 0 0 -2 -2h-10a2 2 0 0 0 -2 2v6a2 2 0 0 0 2 2h2",key:"svg-2"}]]),L=d("checks","IconChecks",[["path",{d:"M7 12l5 5l10 -10",key:"svg-0"}],["path",{d:"M2 12l5 5m5 -5l5 -5",key:"svg-1"}]]),de=d("circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),me=d("circle","IconCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}]]),he=d("click","IconClick",[["path",{d:"M3 12l3 0",key:"svg-0"}],["path",{d:"M12 3l0 3",key:"svg-1"}],["path",{d:"M7.8 7.8l-2.2 -2.2",key:"svg-2"}],["path",{d:"M16.2 7.8l2.2 -2.2",key:"svg-3"}],["path",{d:"M7.8 16.2l-2.2 2.2",key:"svg-4"}],["path",{d:"M12 12l9 3l-4 2l-2 4l-3 -9",key:"svg-5"}]]),U=d("exchange","IconExchange",[["path",{d:"M5 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M19 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M19 8v5a5 5 0 0 1 -5 5h-3l3 -3m0 6l-3 -3",key:"svg-2"}],["path",{d:"M5 16v-5a5 5 0 0 1 5 -5h3l-3 -3m0 6l3 -3",key:"svg-3"}]]),pe=d("minus","IconMinus",[["path",{d:"M5 12l14 0",key:"svg-0"}]]),ue=d("mood-dollar","IconMoodDollar",[["path",{d:"M20.87 10.48a9 9 0 1 0 -7.876 10.465",key:"svg-0"}],["path",{d:"M9 10h.01",key:"svg-1"}],["path",{d:"M15 10h.01",key:"svg-2"}],["path",{d:"M9.5 15c.658 .64 1.56 1 2.5 1c.357 0 .709 -.052 1.043 -.151",key:"svg-3"}],["path",{d:"M21 15h-2.5a1.5 1.5 0 0 0 0 3h1a1.5 1.5 0 0 1 0 3h-2.5",key:"svg-4"}],["path",{d:"M19 21v1m0 -8v1",key:"svg-5"}]]),fe=d("progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]),q=d("trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]),W=d("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function ge({cart:a}){const u=()=>{v.post(`/admin/cart/increment/${a.product_slug}`)},c=()=>{v.post(`/admin/cart/decrement/${a.product_slug}`)},r=()=>{v.delete(`/admin/cart/${a.product_slug}`,{onSuccess:()=>E.success("Deleted Item!")})};return`${a.product_picture}`,t(f,{children:[t("div",{className:"flex order py-4 flex-flex-column gap-4",children:[e("div",{className:"flex gap-2 w-1/2 sm:w-2/3 overflow-hidden",children:t("div",{className:"flex flex flex-col justify-between",children:[e("h6",{className:"text-base text-fourth",children:a.product_name}),t("h5",{className:"text-lg font-semibold text-fourth",children:["Rp. ",R(a.product_price)]})]})}),t("div",{className:"w-1/2 sm:w-1/3 text-end flex flex-col flex-1 justify-between",children:[e(ee,{size:20,color:"red",className:"ml-auto",onClick:r}),t("div",{className:"flex justify-between align-center mt-3 ",children:[e(pe,{size:32,className:a.quantity===0?"bg-gray-400 text-white border p-1 rounded":"text-red-500 border p-1 rounded cursor-pointer",onClick:a.quantity===0?null:c}),e("span",{className:"border-0 w-12 px-0 h-8 text-lg text-center mx-auto text-lg",children:a.quantity}),e(te,{size:32,className:"text-white bg-primary border p-1 rounded cursor-pointer",onClick:u})]})]})]}),e("hr",{})]})}function ye({data:a,setData:u,onSubmit:c,total_price:r}){let[b,o]=i.useState(!1);const[O,P]=i.useState(""),[g,y]=i.useState(""),[C,m]=i.useState(0);function x(s){if(!a.payment_id){alert("Please select a payment method first");return}o(!0),y("Invoice"),P(s)}function S(){o(!1)}const{errors:N}=V().props,h=s=>{u(s.target.name,s.target.value)},p=s=>{if(s.key==="Enter"&&C&&a.charge!==0){if(!a.payment_id){alert("Please select a payment method first");return}if(console.log(C,a.charge,b),b){if(console.log("a"),M<r)return;c(s),o(!1)}else x("create")}};i.useEffect(()=>(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}),[C,b,a.payment_id,a.charge,r]),i.useEffect(()=>{u("charge",r)},[a.payment_id]);const[T,w]=i.useState(!1),k=s=>{const l=s.target.value===1;w(l)},j=s=>{if(!a.payment_id){s.preventDefault(),alert("Please select a payment method first");return}c(s),o(!1)},M=parseFloat(a.charge)||0,_=M-r;return t(f,{children:[N.name?e(B,{className:"",value:N.name}):null,t("div",{className:"flex items-center gap-4",children:[t("div",{className:"w-1/2 flex items-center pl-4 border border-gray-300 rounded",children:[e(I,{id:"bordered-radio-1",type:"radio",checked:a.payment_id==1,onChange:s=>{h(s),k(s),m(1)},value:"1",name:"payment_id",className:"w-4 h-4 text-primary bg-gray-100 border-gray-300 focus:ring-primary"}),e("label",{htmlFor:"bordered-radio-1",className:"w-full py-2 ml-2 font-medium text-third",children:"Pay Cash"})]}),t("div",{className:"w-1/2 flex items-center pl-4 border border-gray-300 rounded",children:[e(I,{id:"bordered-radio-2",type:"radio",checked:a.payment_id==2,onChange:s=>{h(s),k(s),m(2)},value:"2",name:"payment_id",className:" w-4 h-4 text-primary bg-gray-100 border-gray-300 focus:ring-primary"}),e("label",{htmlFor:"bordered-radio-2",className:"w-full py-2 ml-2 font-medium text-third",children:"Pay Qris"})]})]}),a.payment_id?t(f,{children:[e(I,{type:"number",min:a.is_paid===1?1:"",name:"charge",id:"charge",className:"w-full",defaultValue:r,onChange:h,placeholder:"Charge.."}),N.charge?e(B,{className:"",value:N.charge}):null]}):"",e("div",{className:"pb-4 flex items-end flex-1 justify-end",children:a.charge!==0||a.is_paid===1?e(f,{children:e(z,{type:"button",onClick:()=>x("create"),disabled:M<r||!a.payment_id,className:"bg-violet-600 text-white px-3 py-4 w-full rounded",children:"Buy"})}):e(f,{children:e(z,{className:"bg-violet-600 text-white px-3 py-4 w-full rounded",disabled:!a.payment_id||a.is_paid==="",children:"Confirm"})})}),t(X,{isOpen:b,onClose:()=>o(!1),size:"1/3",type:O,title:g,className:`transition-opacity duration-1000 ease-out ${b?"opacity-100":"opacity-0"}`,children:[t("div",{className:"mb-6 relative",children:[t("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none",children:[e(Q,{color:"green"})," ",e("sup",{className:"ml-1",children:"Rp."})]}),e(I,{type:"number",name:"charge",id:"charge",className:"w-full pl-16",value:a.charge,onChange:h,placeholder:"Charge.."})]}),t("div",{className:"mb-6 relative",children:[t("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none",children:[e(U,{color:"orange"})," ",e("sup",{className:"ml-1",children:"Rp."})]}),e(I,{type:"number",readOnly:!0,disabled:!0,name:"change",id:"change",className:"w-full pl-16",value:_,placeholder:"Change.."})]}),t("div",{className:"flex gap-4",children:[e(D,{onClick:()=>S(),children:e(W,{})}),e(z,{onClick:s=>{s.preventDefault(),j(s)},className:"bg-violet-600 text-white px-3 py-4 w-full rounded",disabled:M<r,children:e(L,{})})]})]})]})}function xe({invoice:a,onClick:u}){let[c,r]=i.useState(!1);const[b,o]=i.useState(""),[O,P]=i.useState(""),g=n=>{const $=new SpeechSynthesisUtterance(`The order under the name ${n} has been completed`);window.speechSynthesis.speak($)};function y(){r(!1)}const C=n=>{v.post(`/admin/invoice/${n}`,{_method:"put"},{onSuccess:()=>{r(!1),E.success("Invoice has been added!")}})},[m,x]=i.useState({charge:a.charge}),[S,N]=i.useState(a.total_price);let[h,p]=i.useState(!1);const[T,w]=i.useState(""),[k,j]=i.useState("");function M(n){p(!0),j("Invoice"),w(n)}function _(){p(!1)}const s=n=>{const{name:$,value:F}=n.target;if(x({...m,[$]:F}),$==="charge"){const Y=parseFloat(F)||0,G=parseFloat(a.total_price),H=Y-G;N(H)}},l=n=>{n.preventDefault(),v.put(`/admin/invoice/${a.id}/pay`,{...m,charge:m.charge},{onSuccess:()=>{x({id:"",charge:""}),E.success("Order has been paid!"),setIsOrderListOpen(!1)}})};return t("div",{className:"flex gap-x-2 p-2 w-1/5 border border-secondary rounded text-white",children:[t("div",{className:"flex w-full gap-x-1",children:[t("div",{className:"h-16 w-full text-fourth flex flex-col justify-between",children:[e("h5",{className:"w-full font-semibold text-base text-fourth",children:a.customer_name}),t("span",{className:"text-third text-sm text-left",children:[a.total_quantity," Item"]})]}),t("div",{className:"bg-white flex items-end flex-col flex-1 gap-y-2 h-full justify-between h-16 w-full text-fourth",children:[e("button",{className:"bg-emerald font-semibold text-sm flex items-center gap-x-2 h-full px-1 rounded text-white",type:"button",onClick:()=>M("create"),disabled:a.charge!=0,children:a.charge==0?e(ue,{size:26}):e(f,{children:a.status==1?e(L,{size:26}):e(fe,{size:26})})}),t("div",{className:"bg-sky font-semibold text-sm flex items-center gap-x-2 h-full px-1 rounded text-white",children:[" ",a.charge==0?e(me,{size:26}):e(de,{size:26})]})]}),a.status==1?null:e(f,{children:t("div",{className:"flex flex-col justify-between item-center gap-y-2",children:[e("button",{type:"button",onClick:()=>g(a.customer_name),className:"flex justify-center items-center rounded bg-primary px-1 h-full",children:e(oe,{size:26,className:"p-0 m-0 font-bold"})}),t("button",{onClick:u,className:"flex justify-center items-center rounded bg-violet px-1 h-full",children:[e(he,{})," "]})]})})]}),e(le,{isToast:c,name:"Confirm",onClose:()=>r(!1),title:b,children:t("div",{className:"flex justify-end gap-2 justify-center",children:[e(D,{onClick:()=>y(),children:"No"}),e(z,{onClick:()=>C(O),children:"Yes"})]})}),t(X,{isOpen:h,onClose:()=>p(!1),size:"1/3",type:T,title:k,children:[t("div",{className:"mb-6 relative",children:[t("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none",children:[e(Q,{color:"green"})," ",e("sup",{className:"ml-1",children:"Rp."})]}),e(I,{type:"number",name:"charge",id:"charge",className:"w-full pl-16",value:m.charge||"",onChange:s,placeholder:"Charge.."})]}),t("div",{className:"mb-6 relative",children:[t("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none",children:[e(U,{color:"orange"})," ",e("sup",{className:"ml-1",children:"Rp."})]}),e(I,{type:"number",readOnly:!0,disabled:!0,name:"change",id:"change",className:"w-full pl-16",value:S,placeholder:"Change.."})]}),t("div",{className:"flex gap-4",children:[e(D,{onClick:()=>_(),children:e(W,{})}),e(z,{onClick:n=>{n.preventDefault(),l(n),p(!1)},className:"bg-primary text-white px-3 py-4 w-full rounded",disabled:S<0||m.charge==="",children:e(L,{})})]})]})]})}function ve({product:a,setIsOrderListOpen:u}){return t("button",{onClick:()=>{v.post(`/admin/cart/${a.slug}`,{quantity:1},{onSuccess:r=>{console.log(r,"a"),u(!0),A.success("Add to Cart!")},onFinish:r=>{console.log(r)},onError:r=>{A.error(r[0])}})},className:"border border-secondary rounded-md h-[180px] mb-4 relative flex flex-1 justify-end flex-col bg-cover bg-center",style:{backgroundImage:`url(${a.picture?a.picture:"https://estore.mandom.co.id/assets/images/product/no_image.jpg"})`},children:[e("span",{className:"bg-white opacity-50 text-sm text-black absolute p-1 px-1.5 rounded opacity-[0.8] shadow right-4 top-4",children:a.category.name}),t("span",{className:"bg-white opacity-50 flex items-center gap-2 text-sm text-black absolute p-1 px-1.5 rounded opacity-[0.8] shadow left-4 top-4",children:[e(ne,{})," ",a.daily_stock.quantity]}),t("div",{className:"p-2 text-left w-full bg-opacity-60 bg-white",children:[e("p",{className:"text-fourth rounded text-lg font-bold line-clamp-2",children:a.name}),t("h6",{className:"text-lg font-bold rounded",children:[e("sup",{className:"font-light",children:" Rp."})," ",R(a.price)]})]})]})}function be({categories:a,total_categories:u,carts:c,invoices:r,payments:b,filter_category:o,error:O,...P}){const[g,y]=i.useState(!0),[C,m]=i.useState(null),{data:x,meta:S,links:N}=P.products,h=c.reduce((l,n)=>l+n.price,0),p=c.reduce((l,n)=>l+n.quantity,0),{url:T}=V(),{data:w,setData:k}=J({id:"",name:"",payment_id:"",charge:"",total_price:"",paid:""}),j=()=>{y(!g)},M=l=>{l?(k({name:l.name,charge:l.charge,paid:l.paid,payment_id:l.payment_id.id,carts:c,total_price:h,quantity:p}),v.get("/admin/transaction",{},{preserveState:!0}),m(l),y(!0)):(y(!0),m(null))},_=(l=null)=>{if(l==null||l.preventDefault(),!w.payment_id){alert("Please select a payment method first");return}v.post("/admin/invoice",{...w,carts:c,total:h,is_paid:1,quantity:p,payment_id:w.payment_id},{onSuccess:()=>{k({id:"",name:"",carts:"",total:"",payment_id:"",charge:""}),E.success("Invoice has been added!"),y(!1)}})},s=l=>{v.get(T,{category:l},{})};return t(f,{children:[e(K,{title:"Menu"}),e(ae,{children:t("div",{className:"flex w-full",children:[e("button",{className:"block fixed z-[100] bg-white rounded right-4 top-18 mt-1 p-4 text-primary transition-transform duration-300 hover:scale-105",onClick:j,children:g?e(ce,{className:"transition-transform duration-300"}):e(ie,{className:"transition-transform duration-300"})}),t("div",{className:`bg-white transition-all duration-300 ease-in-out ${g?"w-3/4":"w-full"}`,children:[e("div",{className:"flex w-full mt-6 scrolling-wrapper overflow-x-scroll overflow-y-hidden pb-1 flex-nowrap gap-x-4",children:r.length>0?e(f,{children:r.map((l,n)=>e(xe,{invoice:l,onClick:()=>M(l)},n))}):t("div",{className:"flex justify-start items-center flex-1",children:[t("h1",{className:"text-third mr-2",children:[e(q,{size:24,className:"animate-bounce"})," "]}),e("p",{className:"text-third text-lg",children:"Empty Order List"})]})}),e("hr",{className:"my-4"}),t("div",{className:"flex w-full scrolling-wrapper overflow-x-scroll pb-1 flex-nowrap gap-x-4",children:[e(Z,{href:route("admin.transaction"),className:"flex text-white transition-transform duration-300 hover:scale-105",children:t("div",{className:`w-32 h-18 ${o?"text-fourth":"bg-primary text-white"} rounded rounded border border-secondary p-2 shadow transition-all duration-300`,children:[e("p",{className:"block",children:"All Menu"}),t("h6",{className:"text-lg font-semibold",children:[u," items"]})]})}),a.map((l,n)=>e("button",{onClick:()=>s(l.slug),className:`flex rounded transition-transform duration-300 hover:scale-105 ${(o==null?void 0:o.toLowerCase())===l.name.toLowerCase()?"bg-primary text-white":"hover:bg-orange-300"} text-white`,children:t("div",{className:`w-32 h-18 text-left rounded border border-secondary text-fourth hover:text-white p-2 transition-all duration-300 ${(o==null?void 0:o.toLowerCase())===l.name.toLowerCase()?"text-white":""}`,children:[e("p",{className:"",children:l.name}),t("h6",{className:"text-lg font-semibold",children:[l.products_count," items"]})]})},n))]}),t("div",{className:"w-full",children:[e("hr",{className:"my-4"}),x.length>0?e("div",{className:`grid grid-cols-1 sm:grid-cols-2 ${g?"md:grid-cols-6":"md:grid-cols-7"} lg:grid-cols-lg-4 gap-4 gap-y-8 w-full flex-wrap`,children:x.map((l,n)=>e(ve,{product:l,setIsOrderListOpen:y},n))}):t("div",{className:"flex justify-center items-center flex-col flex-1 h-[280px]",children:[t("h1",{className:"text-third",children:[e(q,{size:64,className:"animate-pulse"})," "]}),e("p",{className:"text-third mt-4 text-lg",children:"Empty Menu"})]}),x.length>0&&e(se,{meta:S,links:N})]})]}),t("div",{className:`w-3/4 sm:w-2/5 md:w-1/4 flex flex-col bg-white top-16 right-0 bottom-0 fixed max-h-screen border-l border-b rounded-bl border-gray-300 ml-2 z-50 ${g?"block animate-slideInRight":"hidden"}`,style:{isolation:"isolate"},children:[t("div",{className:"sticky top-0 w-full flex flex-col justify-end bg-white z-10",children:[e("h3",{className:"text-xl pl-4 font-semibold text-fourth py-5",children:"Order Details"}),e("hr",{})]}),e("div",{className:"px-4 h-3/6 flex flex-col h-full justify-start bg-white flex-1 pt-4 scrolling-wrapper overflow-y-scroll",children:e("div",{className:"flex flex-col flex-1",children:c.length>0?e(f,{children:c.map((l,n)=>e(ge,{cart:l,selectedOrder:C,className:"transition-opacity duration-300 animate-fadeIn"},n))}):t("div",{className:"flex justify-center items-center flex-col flex-1 h-[280px]",children:[t("h1",{className:"text-secondary",children:[e(q,{size:64,stroke:1,className:"animate-bounce"})," "]}),e("p",{className:"text-third mt-4 text-lg",children:"Empty Order"})]})})}),e("div",{className:"h-max w-full px-4 pb-0 bg-white",children:t("div",{className:"space-y-3 flex flex-col justify-start mb-4",children:[e("hr",{}),t("div",{className:"flex justify-between",children:[e("p",{className:"text-lg text-third",children:"Quantity"}),e("p",{className:"text-lg font-bold text-slate-600 transition-all duration-300",children:p})]}),t("div",{className:"flex justify-between",children:[e("p",{className:"text-lg font-semibold text-third",children:"Total"}),t("p",{className:"text-lg font-bold text-slate-600 transition-all duration-300",children:["Rp. ",R(h)]})]}),t("form",{onSubmit:_,className:"w-full space-y-4 transition-all duration-300",children:[e(ye,{onSubmit:_,total_price:h,carts:c,data:w,setData:k}),e("hr",{})]})]})})]})]})})]})}be.layout=a=>e(re,{children:a});export{be as default};
