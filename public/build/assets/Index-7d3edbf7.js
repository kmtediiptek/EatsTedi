import{W as Q,q as B,r as u,j as l,a as e,F as C,y as x,b as E}from"./app-e84518f4.js";import{A as I}from"./Actionbutton-8748f7cb.js";import{T as k}from"./TextInput-aba27e7c.js";import{S as q}from"./react-select.esm-fea93920.js";import{C as U}from"./Container-fe046a49.js";import{M as W}from"./Modal-1644288e.js";import{P as Y}from"./Pagination-efa05824.js";import{P as A}from"./PrimaryButton-6c4f361c.js";import{S as P}from"./SecondaryButton-2ea6ac27.js";import{T as a}from"./Table-20844995.js";import{I as G,T as H}from"./Toast-31845ed4.js";import{A as J}from"./App-67f4dd75.js";import{_ as K}from"./index-c091b8ca.js";import{n as f}from"./Helper-f0b8910d.js";import{A as V}from"./ActionLink-177353c1.js";import{T as F}from"./TabLink-4475ddce.js";import{I as w}from"./InputLabel-0b2959aa.js";import{E as j}from"./Error-9f99633d.js";import{c as X}from"./createReactComponent-6fd5fae7.js";import"./defineProperty-fcf2a4a8.js";import"./typeof-7fd5df1e.js";import"./transition-d5ee3e1f.js";import"./keyboard-2bfe6c0d.js";var Z=X("refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);function _(){const{data:n,setData:p,post:g}=Q({supplier_id:"",daily_stocks:[]}),{errors:i,suppliers:b,daily_stocks:M}=B().props,[y,o]=u.useState(null),T=t=>{const s=t?t.value:"";o(s||"all"),x.get("/admin/setting/product/today",{supplier:s},{preserveState:!0,onSuccess:m=>{p("daily_stocks",m.props.daily_stocks.data)}})},c=(t,s)=>{const m=n.daily_stocks.map(h=>h.product.id===s?{...h,quantity:t.target.value}:h);p("daily_stocks",m)},N=t=>{t.preventDefault(),g("/admin/setting/product/update-stock",{onSuccess:()=>{o(null),p({supplier_id:"",daily_stocks:[]}),setIsOpen(!1),toast.success("Stock updated successfully!")}})},S=b.map(t=>({value:t.id,label:t.name})),v=S.find(t=>t.value===y);return l("div",{children:[l("div",{className:"mb-6",children:[e(w,{htmlFor:"supplier",value:"Supplier"}),e(q,{id:"supplier-select",value:v,options:S,className:"w-full",onChange:T,styles:{control:(t,s)=>({...t,border:(s.isFocused,"2px solid #d4d4d8"),boxShadow:"none","&:hover":{border:"2px solid #d4d4d8"},height:"44px",borderRadius:"8px",zIndex:9999}),option:(t,s)=>({...t,backgroundColor:s.isSelected||s.isFocused?"#d4d4d8":null,color:"black"}),menu:t=>({...t,borderRadius:"8px"}),menuList:t=>({...t,borderRadius:"8px"})},theme:t=>({...t,borderRadius:8,colors:{...t.colors,primary25:"#d4d4d8",primary:"black"}})}),i.supplier_id&&e(j,{value:i.supplier_id})]}),y?e("form",{onSubmit:N,children:n.daily_stocks.length?l(C,{children:[e("hr",{}),e("h4",{className:"text-lg text-fourth font-medium leading-6 mt-4 mb-4",children:"Perbarui Seluruh Stock"}),n.daily_stocks.map(t=>l("div",{className:"flex w-full gap-2 mb-6",children:[l("div",{className:"w-full",children:[e(w,{htmlFor:`name-${t.product.id}`,value:"Name"}),e(k,{name:`name-${t.product.id}`,id:`name-${t.product.id}`,readOnly:!0,className:"w-full",value:t.product.name})]}),l("div",{className:"md:w-1/4",children:[e(w,{htmlFor:`quantity-${t.product.id}`,value:"Initial Quantity"}),e(k,{name:`quantity-${t.product.id}`,id:`quantity-${t.product.id}`,type:"number",className:"w-full",onChange:s=>c(s,t.product.id),value:t.quantity||""}),i[`quantity-${t.product.id}`]&&e(j,{value:i[`quantity-${t.product.id}`]})]})]},t.product.id)),l("div",{className:"flex justify-end gap-2",children:[e(P,{type:"button",onClick:()=>o(null),children:"Cancel"}),e(A,{type:"submit",children:"Update Stock"})]})]}):e("div",{className:"flex w-full h-52 justify-center items-center text-fourth",children:e("h3",{children:"There are no products from this supplier"})})}):e("div",{className:"flex w-full h-52 justify-center items-center text-fourth",children:e("h3",{children:"Choose a Supplier First"})})]})}function ee({total_daily_stocks:n,suppliers:p,...g}){const{data:i,meta:b,links:M}=g.daily_stocks;let[y,o]=u.useState(!1);const[T,c]=u.useState(!1),[N,S]=u.useState(""),[v,t]=u.useState(""),[s,m]=u.useState(null);function h(){o(!0),S("Daily Menu")}function $(){c(!0)}const D=r=>{t(r.target.value),x.get("/admin/setting/product/today",{search:r.target.value,supplier:s},{preserveState:!0})},O=()=>{x.post("/admin/setting/product/reset-stock",{},{onSuccess:()=>{c(!1),K.success("Stock has been successfully reset!")}})},L=r=>{const d=r?r.value:"";m(d||"all"),x.get("/admin/setting/product/today",{search:v,supplier:d},{preserveState:!0})},R=[{value:"all",label:"All Suppliers"},...p.map(r=>({value:r.id,label:r.name}))],z=R.find(r=>r.value===s)||{value:"all",label:"All Suppliers"};return l(C,{children:[e(E,{title:"Setting"}),l(U,{children:[e("h3",{className:"text-2xl mt-10 mb-4 font-semibold text-fourth",children:"Daily Menus"}),l("div",{className:"w-full flex justify-between my-2",children:[l("div",{className:"flex w-full md:w-1/2 gap-2",children:[e(V,{href:route("admin.dashboard")}),e(I,{onClick:()=>h(),type:"button",children:e(Z,{size:18})}),e(I,{onClick:()=>$(),type:"button",children:e(G,{size:18})})]}),l("div",{className:"flex w-full  md:w-1/2 gap-2",children:[e(q,{id:"supplier-select",value:z,options:R,className:"w-full md:w-1/2 md:order-1 order-2",onChange:L,styles:{control:(r,d)=>({...r,border:(d.isFocused,"2px solid #d4d4d8"),boxShadow:"none","&:hover":{border:"2px solid #d4d4d8"},height:"44px",borderRadius:"8px"}),option:(r,d)=>({...r,backgroundColor:d.isSelected||d.isFocused?"#d4d4d8":null,color:"black"}),menu:r=>({...r,borderRadius:"8px"}),menuList:r=>({...r,borderRadius:"8px"})},theme:r=>({...r,borderRadius:8,colors:{...r.colors,primary25:"#d4d4d8",primary:"black"}})}),e(k,{type:"search",className:"w-full md:order-2 order-1 md:w-1/2",placeholder:"Search menu..",value:v,onChange:D})]})]}),l("div",{className:"w-full flex items-center gap-2 py-2",children:[e(F,{href:route("admin.product.index"),active:route().current("admin.product.index"),children:"All Menu"}),e(F,{href:route("admin.product.today.index"),active:route().current("admin.product.today.index"),children:"Daily Menu"})]}),l(a,{children:[e(a.Thead,{children:l("tr",{children:[e(a.Th,{children:"#"}),e(a.Th,{children:"Supplier"}),e(a.Th,{children:"Name"}),e(a.Th,{children:"Price"}),e(a.Th,{children:"Sold"}),e(a.Th,{children:"Rest"}),e(a.Th,{children:"Total Quantity"}),e(a.Th,{children:"Total Price"})]})}),e(a.Tbody,{children:i.length>0?e(C,{children:i.map((r,d)=>l("tr",{className:"bg-white border-b",children:[e(a.Td,{className:"w-5",children:b.from+d}),e(a.Td,{className:"font-bold",children:r.product.supplier.name.toUpperCase()}),e(a.Td,{children:r.product.name}),l(a.Td,{children:[e("sup",{children:" Rp."})," ",f(r.product.price)]}),e(a.Td,{children:f(r.sold)}),e(a.Td,{children:f(r.rest)}),e(a.Td,{children:f(r.quantity)}),l(a.Td,{children:[e("sup",{children:" Rp."})," ",f(r.quantity*r.product.price)]})]},d))}):e("tr",{className:"bg-white border-b text-secondary text-center",children:e(a.Td,{colSpan:"8",children:"No data"})})})]}),i.length>0&&l("div",{className:"flex w-full justify-between items-center",children:[e(Y,{meta:b,links:M}),l("p",{className:"text-sm text-third mt-10",children:["Total Products:"," ",e("span",{className:"font-bold",children:n})," "]})]}),e(W,{isOpen:y,onClose:()=>o(o),setIsOpen:o,size:"1/2",title:N,children:e(_,{})}),e(H,{isToast:T,onClose:()=>c(!1),title:"This action will start the process of resetting all Product Stock. Are you sure you want to reset Stock?",children:l("div",{className:"flex justify-end gap-2 justify-end",children:[e(P,{onClick:()=>c(!1),className:"w-32",children:"No"}),e(A,{onClick:()=>O(),className:"w-32",children:"Yes"})]})})]})]})}ee.layout=n=>e(J,{children:n});export{ee as default};
